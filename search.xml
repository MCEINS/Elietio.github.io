<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[Oracleæ‰¹é‡æ’å…¥æ•°æ®å¼‚å¸¸ java.lang.ArrayIndexOutOfBoundsException]]></title>
    <url>%2F2019%2F08%2FOracle%20java.lang.ArrayIndexOutOfBoundsException.html</url>
    <content type="text"><![CDATA[ä»Šå¤©æµ‹è¯•è¿‡ç¨‹ä¸­ä¸€ä¸ªOracle mybatisæ‰¹é‡æ’å…¥æ•°æ®çš„ä»£ç æŠ¥å‡ºäº†ä¸€ä¸ªå¼‚å¸¸ Caused by: java.lang.ArrayIndexOutOfBoundsException: -32768å…·ä½“å¼‚å¸¸å †æ ˆä¿¡æ¯å¦‚ä¸‹ï¼š1234567891011121314Caused by: java.lang.ArrayIndexOutOfBoundsException: -32768 at oracle.jdbc.driver.OraclePreparedStatement.setupBindBuffers(OraclePreparedStatement.java:2673) at oracle.jdbc.driver.OraclePreparedStatement.processCompletedBindRow(OraclePreparedStatement.java:2206) at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3365) at oracle.jdbc.driver.OraclePreparedStatement.execute(OraclePreparedStatement.java:3476) at com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl.java:3409) at com.alibaba.druid.wall.WallFilter.preparedStatement_execute(WallFilter.java:619) at com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl.java:3407) at com.alibaba.druid.filter.FilterAdapter.preparedStatement_execute(FilterAdapter.java:1080) at com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl.java:3407) at com.alibaba.druid.filter.FilterEventAdapter.preparedStatement_execute(FilterEventAdapter.java:440) at com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl.java:3407) at com.alibaba.druid.proxy.jdbc.PreparedStatementProxyImpl.execute(PreparedStatementProxyImpl.java:167) at com.alibaba.druid.pool.DruidPooledPreparedStatement.execute(DruidPooledPreparedStatement.java:498) æ„Ÿè§‰å¾ˆå¥‡æ€ªï¼ŒæŸ¥çœ‹æ—¥å¿—SQLæ‰“å°ï¼Œè¿™ä¸ªæ–¹ä¹Ÿå°±æ‹¼æ¥äº†400æ¡SQLï¼Œå‚æ•°ä¹Ÿä¸æ˜¯å¾ˆå¤šï¼Œäºæ˜¯ä»æ—¥å¿—é‡Œé¢copyäº†ä¸€ä¸‹æ¥å£å…¥å‚åœ¨æœ¬åœ°ç”¨Postman debugäº†ä¸€ä¸‹ï¼Œç»“æœç¬¬ä¸€æ¬¡å±…ç„¶å…¥åº“æˆåŠŸï¼Œå†æ‰§è¡Œä¸€æ¬¡ï¼Œå‡ºç°äº†åŒæ ·çš„é”™è¯¯ï¼Œå†æ‰§è¡Œï¼ŒåˆæˆåŠŸâ€¦â€¦åå¤å¦‚æ­¤ï¼Œé¡¿æ—¶æ‡µé€¼ã€‚çœ‹å¼‚å¸¸ä¿¡æ¯ï¼Œæ‰§è¡ŒojdbcåŒ…å†…çš„oracle.jdbc.driver.OraclePreparedStatement.setupBindBuffersæ–¹æ³•æ•°ç»„ä¸‹æ ‡è¶Šç•Œï¼Œå¥½å§ï¼Œæ”¾Googleæœä¸€ä¸‹ï¼Œå‘ç°ä¸€æ®µè¿™æ ·æè¿° The 10g driver apparently keeps a global serialnumber for all parameters in the entire batch, with a â€œshortâ€variable. So you can have at most 32768 parameters in the batch. I was havingthe same exception because I have a INSERT statement with 42 parameters and mybatches can be as big as 1000 records, so 42000 &gt; 32768 and this overflowsto a negative index. I reduced the batch factor to 100 to be safe, and all iswell. I guess your update DML should have a larger number of parameters perrecord, right? (My diagnostic of the bug is just deduction from the symptoms)https://community.oracle.com/thread/599441?start=15&amp;tstart=0&gt; è¯´æ˜¯10g driver statementæœ€å¤§å…è®¸å‚æ•°ä¸ªæ•°ä¸º32768ï¼Œè¶…è¿‡ä¼šæŠ¥é”™ã€‚ä¼¼ä¹æœ‰ç‚¹ç±»ä¼¼ï¼Œä½†æ˜¯æˆ‘åªæ’å…¥äº†400æ¡å•Šï¼Œè€Œä¸”æ¯ä¸ªSQLå‚æ•°åªæœ‰9ä¸ªï¼Œä¹Ÿå°±æ˜¯3600ä¸ªå‚æ•°ï¼Œè¿œå°äº32768ã€‚è¿˜æœ‰å¦å¤–ä¸€ä¸ªè¯´æ³• In Oracle Metalink (Oracleâ€™s support site - Note ID 736273.1) I found that this is a bug in JDBC adapter (version 10.2.0.0.0 to 11.1.0.7.0) that when you call preparedStatement with more than 7 positional parameters then JDBC will throw this error.https://stackoverflow.com/questions/277744/jdbc-oracle-arrayindexoutofboundsexception æ„Ÿè§‰ä¹Ÿä¸ç¬¦åˆï¼Œä½†æ˜¯ä»æœç´¢çš„ç»“æœçœ‹ï¼Œ10g çš„ ojdbcä¼¼ä¹ç¡®å®æœ‰äº›é—®é¢˜ï¼Œäºæ˜¯çœ‹äº†ä¸‹pomï¼Œä¹–ä¹–12345&lt;dependency&gt; &lt;groupId&gt;ojdbc14&lt;/groupId&gt; &lt;artifactId&gt;ojdbc14&lt;/artifactId&gt; &lt;version&gt;10.2.0.4.0&lt;/version&gt;&lt;/dependency&gt; é‚£ä¹ˆæ¢ä¸ªç‰ˆæœ¬å§ï¼Œæˆ‘ä»¬æ•°æ®åº“æ˜¯11.2gçš„ï¼Œäºæ˜¯æ¢äº†ä¸ªojdbc612345&lt;dependency&gt; &lt;groupId&gt;com.oracle&lt;/groupId&gt; &lt;artifactId&gt;ojdbc6&lt;/artifactId&gt; &lt;version&gt;11.2.0.4.0&lt;/version&gt;&lt;/dependency&gt; å—¯ï¼Œè¿™æ¬¡å¾ˆé¡ºåˆ©ï¼Œæ²¡æœ‰å†å‡ºç°å¼‚å¸¸ï¼Œçœ‹æ¥ojdbc14ç¡®å®æœ‰äº›é—®é¢˜ï¼Œä½†æ˜¯è¿˜æ˜¯æ¯”è¾ƒç–‘æƒ‘ï¼Œå•å•400æ¡æ•°æ®ï¼Œæ¯æ¡9ä¸ªå‚æ•°å°±å·²ç»è¶…è¿‡é™åˆ¶äº†å—ï¼Ÿ1234567891011121314&lt;insert id="insertBondMarkerAlBatch" parameterType="java.util.List"&gt; INSERT INTO CM_PB_BOND_TENDER_HISTORY (HSTRY_ID, PB_BOND_ID, APPID, SR_NO_ID, GRP_ID, TNDR_PRC, THE_REF_YLD, CRT_TM, UPD_TM ) SELECT CM_PB_BOND_TENDER_HISTORY_SEQ.nextval,A.* FROM ( &lt;foreach collection="list" item="item" index="index" separator="union all"&gt; SELECT #&#123;item.pbBondId,jdbcType=BIGINT&#125;, #&#123;item.appId,jdbcType=VARCHAR&#125;, #&#123;item.srNoId,jdbcType=BIGINT&#125;, #&#123;item.grpId,jdbcType=VARCHAR&#125;, #&#123;item.tndrPrc,jdbcType=VARCHAR&#125;, #&#123;item.theRefYld,jdbcType=VARCHAR&#125;, #&#123;item.crtTm,jdbcType=TIMESTAMP&#125;, #&#123;item.updTm,jdbcType=TIMESTAMP&#125; FROM dual &lt;/foreach&gt;) A &lt;/insert&gt; æ‹¼æ¥ä¸‹æ¥å®é™…SQLå¦‚ä¸‹ï¼Œç±»ä¼¼äºinsert into tableA select * from tableB12345678910111213INSERT INTO CM_PB_BOND_TENDER_HISTORY (HSTRY_ID, PB_BOND_ID, APPID, SR_NO_ID, GRP_ID, TNDR_PRC, THE_REF_YLD, CRT_TM, UPD_TM) SELECT CM_PB_BOND_TENDER_HISTORY_SEQ.nextval, A.* FROM ( SELECT ?, ?, ?, ?, ?, ?, ?, ? FROM dual union all SELECT ?, ?, ?, ?, ?, ?, ?, ? FROM dual union all SELECT ?, ?, ?, ?, ?, ?, ?, ? FROM dual union all ...... ) A å®é™…debugäº†ä¸€ä¸‹ï¼Œç¡®å®å‡ºå¼‚å¸¸çš„æ—¶å€™OraclePreparedStatement.setupBindBuffersæ–¹æ³•shortæ•°ç»„ bindIndicatorså¤§å°è¶…è¿‡äº†32768ï¼Œæ¢æˆojdbc6çš„æ—¶å€™è¯¥æ–¹æ³•æœªè°ƒç”¨ã€‚]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Oracle</tag>
        <tag>å¼‚å¸¸</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æƒ¨ç—›ï¼Œç¬”è®°æœ¬æœºæ¢°ç¡¬ç›˜çªç„¶è·ªäº†]]></title>
    <url>%2F2019%2F08%2FHDD.html</url>
    <content type="text"><![CDATA[æ„Ÿè§‰å¯èƒ½æ˜¨å¤©éƒ½è·ªäº†ï¼Œä¸€ç›´æ²¡æ³¨æ„ï¼Œä»Šå¤©æ™šä¸Šæ‰å‘ç°åªå‰©ä¸€ä¸ªå›ºæ€Cç›˜äº†ï¼Œè®¾å¤‡ç®¡ç†å™¨ä¹Ÿæ‰¾ä¸åˆ°æœºæ¢°ç¡¬ç›˜ï¼Œæ‹”äº†é‡æ’ä¹Ÿä¸è½¬ï¼Œå¿ƒå¡ï¼Œæ˜æ˜è¿™å—1Tæ—¥ç«‹ä¹Ÿå°±2å¹´å¤šå•Šï¼Œé€šç”µä¹Ÿå°±6000hï¼Œæˆ‘å¯¹æ—¥ç«‹è¿˜ç‰¹æœ‰å¥½æ„Ÿçš„è¯´ï¼Œä¹°äº†å¥½å‡ å—äº†ï¼Œæƒ³åˆ°å¥½å¤šä¸œè¥¿ä¹Ÿæ²¡å¤‡ä»½å°±è›‹ç–¼ ä»å„ä¸ªè®ºå›æ”¶é›†çš„æ­Œæ›²ã€å›¾åŒ…ã€æ¼«ç”»ï¼Œè¿˜æœ‰å„ç§è½¯ä»¶ã€æ–‡æ¡£ã€é…ç½®ç­‰ç­‰ï¼Œè™½ç„¶ä¸€éƒ¨åˆ†ç½‘ç›˜æœ‰å¤‡ä»½ï¼Œä½†æ˜¯å…¨éƒ¨æ‹–ä¸‹æ¥ä¹Ÿå¾—è´¹ä¸å°‘åŠŸå¤«ï¼Œè€Œä¸”æœ‰äº›ä¸œè¥¿å®Œå…¨æƒ³ä¸èµ·äº†ã€‚ã€‚ã€‚å”¯ä¸€åº†å¹¸çš„æ˜¯åšå®¢çš„ä¹‹å‰å¤‡ä»½äº†ä¸€ä»½åˆ°Gitä¸Šï¼Œhexoå’Œä¸»é¢˜å¤šè®¾å¤‡åŒæ­¥ï¼Œo(ï¸¶ï¸¿ï¸¶)o å”‰ï¼Œä»¥åè¿˜æ˜¯å¤šåšå¤‡ä»½å§ã€‚ æ–°ä¹°çš„2Tè¥¿æ•°è“ç›˜ï¼Œç©ºç©ºå¦‚ä¹Ÿã€‚]]></content>
      <categories>
        <category>éšç¬”</category>
      </categories>
      <tags>
        <tag>ç¡¬ç›˜</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Jedis Unexpected end of stream å¼‚å¸¸]]></title>
    <url>%2F2019%2F05%2FJedis-Unexpected-end-of-stream.html</url>
    <content type="text"><![CDATA[è¿™å‘¨æœ«é¡¹ç›®ç”Ÿäº§è¦ä¸Šä¸€ä¸ªä¿®æ•°ç‰ˆæœ¬ï¼Œå…¶ä¸­ä¸€æ­¥æ˜¯ä»Mysqlä¸­çš„ä¸´æ—¶è¡¨æŸ¥æ‰¾æ•°æ®ç„¶åæ‹¼è£…keyä»Redisä¸­æŸ¥æ‰¾å¯¹åº”çš„ç¼“å­˜æ•°æ®å¹¶ä¿®æ”¹ã€‚ç„¶è€Œå‡çº§è¿‡ç¨‹ä¸­ä¿®æ•°ç¨‹åºå´æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸Unexpected end of streamæ„å¤–åœæ­¢ã€‚ 12345redis.clients.jedis.exceptions.JedisConnectionException: Unexpected end of stream. at redis.clients.util.RedisInputStream.ensureFill(RedisInputStream.java:199) at redis.clients.util.RedisInputStream.readByte(RedisInputStream.java:40) at redis.clients.jedis.Protocol.process(Protocol.java:151)...... éœ€è¦ä¿®æ•°çš„Redisé‡‡ç”¨çš„æ˜¯codisæ­å»ºçš„é›†ç¾¤ï¼Œæˆ‘ä»¬ç«‹å³Telnetè®¿é—®çš„ç«¯å£ï¼Œå¹¶åœ¨æœåŠ¡å™¨ä½¿ç”¨Redis-cliç›´æ¥è¿æ¥ï¼Œç»“æœéƒ½æœªå‘ç°å¼‚å¸¸ã€‚äºæ˜¯ç«‹å³å»ç½‘ä¸ŠæŸ¥æ‰¾ç›¸å…³èµ„æ–™ï¼Œç½‘ä¸Šéƒ½è¿™æ ·æè¿°æ­¤å¼‚å¸¸ã€‚ å®¢æˆ·ç«¯ç¼“å†²åŒºå¼‚å¸¸è¿™ä¸ªå¼‚å¸¸æ˜¯å®¢æˆ·ç«¯ç¼“å†²åŒºå¼‚å¸¸ï¼Œäº§ç”Ÿè¿™ä¸ªé—®é¢˜å¯èƒ½æœ‰ä¸‰ä¸ªåŸå› ï¼š å¤šä¸ªçº¿ç¨‹ä½¿ç”¨ä¸€ä¸ªJedisè¿æ¥ã€‚ å®¢æˆ·ç«¯ç¼“å†²åŒºæ»¡äº†,Redisæœ‰ä¸‰ç§å®¢æˆ·ç«¯ç¼“å†²åŒºï¼š æ™®é€šå®¢æˆ·ç«¯ç¼“å†²åŒº(normal)ï¼šç”¨äºæ¥å—æ™®é€šçš„å‘½ä»¤ï¼Œä¾‹å¦‚getã€setã€msetã€hgetallã€zrangeç­‰ã€‚ slaveå®¢æˆ·ç«¯ç¼“å†²åŒº(slave)ï¼šç”¨äºåŒæ­¥masterèŠ‚ç‚¹çš„å†™å‘½ä»¤ï¼Œå®Œæˆå¤åˆ¶ã€‚ å‘å¸ƒè®¢é˜…ç¼“å†²åŒº(pubsub)ï¼špubsubä¸æ˜¯æ™®é€šçš„å‘½ä»¤ï¼Œå› æ­¤æœ‰å•ç‹¬çš„ç¼“å†²åŒºã€‚ Rediså®¢æˆ·ç«¯ç¼“å†²åŒºé…ç½®çš„æ ¼å¼æ˜¯ï¼š 1client-output-buffer-limit &lt;class&gt; &lt;hard limit&gt; &lt;soft limit&gt; &lt;soft seconds&gt; class: å®¢æˆ·ç«¯ç±»å‹ï¼šå¯é€‰å€¼ä¸ºnormalã€slaveå’Œpubsubã€‚ hard limit: å¦‚æœå®¢æˆ·ç«¯ä½¿ç”¨çš„è¾“å‡ºç¼“å†²åŒºå¤§äºhard limitï¼Œå®¢æˆ·ç«¯ä¼šè¢«ç«‹å³å…³é—­ï¼Œå•ä½ä¸ºç§’ã€‚ soft limitå’Œsoft seconds: å¦‚æœå®¢æˆ·ç«¯ä½¿ç”¨çš„è¾“å‡ºç¼“å†²åŒºè¶…è¿‡äº†soft limitå¹¶ä¸”æŒç»­äº†soft limitç§’ï¼Œå®¢æˆ·ç«¯ä¼šè¢«ç«‹å³å…³é—­ï¼Œå•ä½ä¸ºç§’ã€‚ é•¿æ—¶é—´é—²ç½®è¿æ¥ä¼šè¢«æœåŠ¡ç«¯ä¸»åŠ¨æ–­å¼€ï¼Œå¯ä»¥æŸ¥è¯¢timeouté…ç½®çš„è®¾ç½®ä»¥åŠè‡ªèº«è¿æ¥æ± é…ç½®ç¡®å®šæ˜¯å¦éœ€è¦åšç©ºé—²æ£€æµ‹ã€‚ äºæ˜¯æˆ‘ä»¬ç«‹å³å¯¹é…ç½®è¿›è¡Œäº†æ£€æŸ¥ï¼Œå¹¶æœªå‘ç°æœ‰ç›¸å…³é—®é¢˜ï¼Œtimeouté»˜è®¤è®¾ç½®ä¸º0ï¼Œå®¢æˆ·ç«¯ç¼“å†²åŒºä¸´æ—¶ä¿®æ”¹ä¸ºä¸é™åˆ¶ä¹Ÿæœªè§ç”Ÿæ•ˆã€‚ è¿™ä¸‹çŠ¯æ„äº†ï¼Œç”±äºè¿™ä¸ªä¿®æ•°ç¨‹åºå‡ ä¹æ²¡æœ‰æ—¥å¿—ï¼Œä»£ç ä¹Ÿä¸æ˜¯æˆ‘ä»¬ç¼–å†™ï¼Œè€Œæ˜¯ä¸€ä½å¤–åœ°çš„åŒäº‹æä¾›çš„ã€‚åªèƒ½ä¸€æ³¢äººç´§æ€¥åˆ†æä»£ç ï¼Œä¸€æ³¢äººç»§ç»­æŸ¥è¯¢é”™è¯¯æ—¥å¿—ï¼Œä»å¼‚å¸¸çš„å †æ ˆä¸­æˆ‘ä»¬å‘ç°å¼‚å¸¸æ˜¯ä»æ‰§è¡Œredisçš„ä¸€ä¸ªgetæ–¹æ³•æŠ›å‡ºçš„ï¼Œéš¾é“æ˜¯getæŸä¸ªkeyçš„æ—¶å€™å‡ºç°äº†å¼‚å¸¸ï¼Ÿç”±äºæ—¥å¿—ä¸­æ²¡æœ‰æ‰“å°å…·ä½“çš„keyä¿¡æ¯ï¼Œæ‰€ä»¥ä¹Ÿä¸æ¸…æ¥šå…·ä½“æƒ…å†µï¼Œéš¾é“æ˜¯æŸä¸ªkeyçš„ä½“ç§¯è¿‡å¤§ï¼Œå¯¼è‡´æŸ¥è¯¢çš„æ—¶å€™è¶…è¿‡äº†é™åˆ¶ï¼Ÿäºæ˜¯ç«‹å³ä½¿ç”¨bigkeysæŸ¥è¯¢äº†ä¸€ä¸‹Redisçš„å¤§ä½“ç§¯keyï¼Œç»“æœæœ€å¤§çš„ä¹Ÿåªæœ‰åå‡ kbï¼Œå¾ˆæ˜¾ç„¶è¿™ä¹Ÿä¸æ˜¯åŸå› ã€‚å¤§å®¶æ­£åœ¨ä¸€ç­¹è«å±•ï¼Œå‡†å¤‡æŠŠç¨‹åºåŠ ä¸Šè¯¦ç»†çš„æ—¥å¿—å†å…·ä½“åˆ†æï¼Œä½†æ˜¯ç”Ÿäº§ç¯å¢ƒåšç´§æ€¥å˜æ›´äº¤ä»˜ç‰©æ˜¯å¾ˆå›°éš¾çš„ï¼Œä¹‹å‰æˆ‘ä»¬å·²ç»åœ¨æ¨¡æ‹Ÿç¯å¢ƒåŒæ­¥ç”Ÿäº§æ•°æ®æµ‹äº†å¥½å‡ è½®ï¼Œéƒ½æœªå‘ç°é—®é¢˜ï¼Œä¸ºä½•ç”Ÿäº§å°±å‡ºç°é—®é¢˜äº†å‘¢ï¼Ÿ ç»§ç»­çœ‹codis porxyçš„æ—¥å¿—ï¼Œå‘ç°äº†ä¸€ä¸ªç‰¹æ®Šçš„åœ°æ–¹ï¼Œå®¢æˆ·ç«¯å»ºç«‹çš„è¿æ¥æ¯æ¬¡éƒ½æ˜¯ç»è¿‡60såè¢«æ–­å¼€ï¼Œæ˜¾ç¤ºEOFé”™è¯¯ï¼Œä»£è¡¨å®¢æˆ·ç«¯å®¢æˆ·ç«¯ä¸»åŠ¨æ–­å¼€ï¼Œäºæ˜¯æˆ‘ä»¬ç«‹å³æŸ¥æ‰¾ç›¸å…³é…ç½®ï¼Œæ˜¯å¦å­˜åœ¨60sçš„é…ç½®ï¼Œè¿™æ—¶å€™è¿ç»´åŒå­¦æåˆ°äº†ä¸€ä»¶äº‹ï¼Œcodis-porxyä½¿ç”¨äº†nginxåšè´Ÿè½½å‡è¡¡ä»£ç†ï¼Œnginxåº”è¯¥åšäº†è¶…æ—¶é…ç½®ï¼Œäºæ˜¯æˆ‘ä»¬ç¿»çœ‹äº†nginxé…ç½®ï¼Œæœç„¶å­˜åœ¨ä¸€ä¸ª60sçš„è¶…æ—¶é…ç½®ï¼Œè€Œè¿™æ—¶å€™æˆ‘ä»¬å†å»ç¿»çœ‹ä»£ç é€»è¾‘ï¼Œå‘ç°äº†ä¸€ä¸ªé—®é¢˜ï¼Œé¦–å…ˆç¨‹åºä½¿ç”¨jediså»ºç«‹ä¸€ä¸ªredisè¿æ¥ï¼Œç„¶åä»MySQLä»æŸ¥æ‰¾ä¸´æ—¶è¡¨æ‰€æœ‰æ•°æ®ï¼Œç„¶åä¿®æ”¹redisç¼“å­˜ã€‚è€Œæˆ‘ä»¬çš„ä¸´æ—¶è¡¨æ•°æ®è¿‡äºåºå¤§ï¼Œè€Œä¸”ç¼ºä¹ç´¢å¼•ï¼Œæ‰€ä»¥æŸ¥è¯¢è¿™ä¸€æ­¥èŠ±è´¹äº†å¾ˆé•¿æ—¶é—´ï¼Œå·²ç»è¶…è¿‡60sï¼Œç­‰æ•°æ®æŸ¥è¯¢å®Œæ¯•ï¼Œå†æ‰§è¡Œredisæ“ä½œï¼Œæ­¤æ—¶ä¸€ç›´ç©ºé—²çš„è¿æ¥å·²ç»è¢«nginxå½“ä½œè¶…æ—¶ç»™æ–­å¼€äº†ã€‚ä¸ºä½•ä¹‹å‰æ¨¡æ‹Ÿç¯å¢ƒå¹¶æœªå‡ºç°è¿™ä¸ªé—®é¢˜ï¼Ÿåº”è¯¥æ˜¯æœ€è¿‘å¾…ä¿®çš„æ•°æ®åˆå¢åŠ äº†å¾ˆå¤šï¼Œåˆšå¥½è¶…è¿‡60sï¼Œå¯¼è‡´è¿™ä¸ªé—®é¢˜å¹¶æœªåœ¨æ¨¡æ‹Ÿé˜¶æ®µå‘ç°ã€‚ äºæ˜¯æˆ‘ä»¬åœ¨æ¨¡æ‹Ÿç¯å¢ƒå¤ç°è¯¥é—®é¢˜ï¼Œå¹¶ä¸´æ—¶æŠŠnginxé…ç½®ä¿®æ”¹ä¸º600sï¼Œäºæ˜¯ä¿®æ•°ç¨‹åºæ­£å¸¸æ‰§è¡Œï¼Œæ²¡æœ‰å¼‚å¸¸ï¼Œé—®é¢˜åˆ°æ­¤è§£å†³ï¼Œäºæ˜¯ç”Ÿäº§åŒæ­¥æ“ä½œï¼Œæœ€ç»ˆå®Œæˆäº†å‡çº§ã€‚]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Redis</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Nintendo Switchæ›´æ¢å†…å­˜å¡]]></title>
    <url>%2F2019%2F04%2Freplace-nintendoswitch-sd.html</url>
    <content type="text"><![CDATA[NSå…¥æ‰‹ä¸€å¹´å¤šäº†ï¼Œä¸€ç›´æ‹¿å¼ 32Gçš„microSDå¡å‡‘åˆç€ï¼Œå› ä¸ºå…¥æ‰‹æ¸¸æˆä¸å¤šï¼Œåˆéƒ½æ˜¯å®ä½“ç‰ˆï¼Œæ‰€ä»¥ä¸‹è½½å‡ ä¸ªDLCä¹Ÿå®Œå…¨å¤Ÿäº†ï¼Œä¸è¿‡è€ƒè™‘åˆ°å®ä½“ç‰ˆæ¢å¡è¿˜æ˜¯éº»çƒ¦ï¼Œè€Œä¸”ä»Šå¹´æ„Ÿå…´è¶£çš„æ¸¸æˆä¹Ÿä¸å°‘ï¼Œæœ‰äº›ä¸æ‰“ç®—ä¹°å®ä½“äº†ï¼Œæ‰€ä»¥ä¸€ç›´æƒ³æ‰¾ä¸ªæœºä¼šæ¢å¼ å¤§ä¸€ç‚¹çš„microSDå¡ï¼Œæ­£å¥½ç‹—ä¸œ200Gé—ªè¿ªå¡æ´»åŠ¨195ï¼Œä»·æ ¼è¿˜ç®—OKï¼Œäºæ˜¯å…¥æ‰‹æ¢ä¹‹ã€‚ å‡†å¤‡ï¼š Nintendo Switch é—ªè¿ªï¼ˆSanDiskï¼‰200GB TFï¼ˆMicroSDï¼‰å­˜å‚¨å¡ U1 C10 A1 é«˜é€Ÿè¯»å¡å™¨ä¸€æš PC æ¢å¡æµç¨‹ï¼š1. å–å¡ï¼šNS å…³æœºï¼ˆPower Offï¼‰ï¼Œå–å‡ºåŸæ¥çš„ MicroSD å¡ï¼Œå¹¶æŠŠMicroSDå¡å†…å®¹å¤‡ä»½åˆ°PC2. NSæ’å…¥æ–°å¡ï¼ˆå¯èƒ½éœ€è¦æ›´æ–°ç³»ç»Ÿï¼‰3. æ ¼å¼åŒ–æ–°å¡ï¼ˆå»ºè®®ï¼‰ï¼šè®¾ç½® - ç³»ç»Ÿè®¾ç½® - æ ¼å¼åŒ–é€‰é¡¹ - æ ¼å¼åŒ– microSD å¡ï¼Œæ ¼å¼åŒ–æ–°å¡ã€‚4. æ‹·è´æ¸¸æˆæ–‡ä»¶ï¼šå°†æ–°å¡é‡Œçš„ Nintendo æ–‡ä»¶å¤¹åˆ é™¤ï¼ŒåŒæ—¶å°†æ—§å¡å¤‡ä»½åˆ°PCé‡Œçš„ Nintendo æ–‡ä»¶å¤¹å¤åˆ¶åˆ°æ–°å¡é‡Œ5. æ’å…¥æ–°å¡ï¼šåœ¨å…³æœºçš„çŠ¶æ€ä¸‹æ’å…¥æ–°å¡ï¼Œç„¶åå¼€æœºï¼Œæ£€æŸ¥ä¸‹è½½å†…å®¹æ˜¯å¦å­˜åœ¨ã€‚]]></content>
      <categories>
        <category>ç”µå­äº§å“</category>
      </categories>
      <tags>
        <tag>ç”µå­äº§å“</tag>
        <tag>Nintendo Switch</tag>
        <tag>NS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[TCPçš„ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹]]></title>
    <url>%2F2019%2F04%2Ftcp-handshake-wave.html</url>
    <content type="text"><![CDATA[TCPï¼ˆTransmission Control Protocoï¼‰ï¼Œæ˜¯ä¸€ç§åŸºäºå­—èŠ‚æµé¢å‘è¿æ¥çš„ä¼ è¾“å±‚åè®®ã€‚æ•°æ®çš„ä¼ è¾“éœ€è¦é€šä¿¡åŒæ–¹å»ºç«‹ä¸€ä¸ªè¿æ¥ï¼ŒTCPåè®®é‡‡ç”¨ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹ä¸€ä¸ªè¿æ¥ï¼Œé‡‡ç”¨ 4 æ¬¡æŒ¥æ‰‹æ¥å…³é—­ä¸€ä¸ªè¿æ¥ã€‚æ¯ä¸€ä¸ªTCPè¿æ¥éƒ½æœ‰ä¸¤ä¸ªç«¯ç‚¹ï¼Œå«ä½œå¥—æ¥å­—ï¼ˆsocketï¼‰ï¼Œå®ƒçš„å®šä¹‰ä¸ºIPåœ°å€+ç«¯å£å·æ‹¼æ¥ã€‚ TCP/IPåè®®æ¦‚å†µ IPv4: ç½‘é™…åè®®ç‰ˆæœ¬4(Internet Protocol version 4), ä½¿ç”¨32ä½åœ°å€ IPv6: ç½‘é™…åè®®ç‰ˆæœ¬6(Internet Protocol version 6), ä½¿ç”¨128ä½åœ°å€ï¼Œæ˜¯IPv4æ›¿ä»£å“ï¼Œé€šå¸¸æŠŠå®ƒä¸¤è€…ç§°ä¸ºâ€IPâ€œ TCP: ä¼ è¾“æ§åˆ¶åè®®(Transmission Control Protocol),TCPæ˜¯ä¸€ä¸ªé¢å‘è¿æ¥çš„åè®®,ä¸ºç”¨æˆ·è¿›ç¨‹æä¾›å¯é çš„å…¨åŒå·¥å­—èŠ‚æµï¼Œ TCPå¥—æ¥å­—æ˜¯ä¸€ç§æµå¥—æ¥å­—(stream sockte), å…³å¿ƒç¡®è®¤, è¶…æ—¶, é‡ä¼ ç­‰ç»†èŠ‚ UDP: ç”¨æˆ·æ•°æ®æŠ¥åè®®(User Datagram Protocol), UDPæ˜¯ä¸€ä¸ªæ— è¿æ¥åè®®,UDPå¥—æ¥å­—æ˜¯ä¸€ç§æ•°æ®æŠ¥å¥—æ¥å­—(datagram socket) SCTPï¼šæµæ§åˆ¶ä¼ è¾“åè®®(Stream Control Transmission Protocol),SCTPæ˜¯ä¸€ä¸ªæä¾›å¯é å…¨åŒå·¥å…³è”çš„é¢å‘è¿æ¥çš„åè®® ICMPï¼šç½‘é™…æ§åˆ¶æ¶ˆæ¯åè®®(Internet Control Message Protocol),å¤„ç†åœ¨è·¯ç”±å™¨å’Œä¸»æœºä¹‹é—´æµé€šçš„é”™è¯¯å’Œæ§åˆ¶æ¶ˆæ¯ ICMPv6ï¼šç½‘é™…æ§åˆ¶æ¶ˆæ¯åè®®ç‰ˆæœ¬6 IGMP: ç½‘é™…ç»„ç®¡ç†åè®®,ç”¨äºå¤šæ’­ ARP: åœ°å€è§£æåè®®(Address Resolution Protocol),æŠŠIPv4åœ°å€æ˜ å°„æˆä¸€ä¸ªç¡¬ä»¶åœ°å€(å¦‚ä»¥å¤ªç½‘åœ°å€) RARP: ååœ°å€è§£æåè®®(Reverse..), å°†ç¡¬ä»¶åœ°å€æ˜ å°„æˆIPv4åœ°å€ BPF: BSDåˆ†ç»„è¿‡æ»¤å™¨ TCPé€šä¿¡ä¸‰éƒ¨æ›² å»ºç«‹ï¼šä¸‰æ¬¡æ¡æ‰‹ ä¼ è¾“ï¼šè¶…æ—¶é‡ä¼ ã€å¿«é€Ÿé‡ä¼ ã€æµé‡æ§åˆ¶ã€æ‹¥å¡æ§åˆ¶ç­‰ æ–­å¼€ï¼šå››æ¬¡æŒ¥æ‰‹ TCPæœåŠ¡æ¨¡å‹ä¸€ä¸ª TCP è¿æ¥ç”±ä¸€ä¸ª 4 å…ƒç»„æ„æˆï¼Œåˆ†åˆ«æ˜¯ä¸¤ä¸ª IP åœ°å€å’Œä¸¤ä¸ªç«¯å£å·ã€‚ä¸€ä¸ª TCP è¿æ¥é€šå¸¸åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼šå¯åŠ¨ã€æ•°æ®ä¼ è¾“ã€å…³é—­ã€‚ å½“ TCP æ¥æ”¶åˆ°å¦ä¸€ç«¯çš„æ•°æ®æ—¶ï¼Œå®ƒä¼šå‘é€ä¸€ä¸ªç¡®è®¤ï¼Œä½†è¿™ä¸ªç¡®è®¤ä¸ä¼šç«‹å³å‘é€ï¼Œä¸€èˆ¬ä¼šå»¶è¿Ÿä¸€ä¼šå„¿ã€‚ACK æ˜¯ç´¯ç§¯çš„ï¼Œä¸€ä¸ªç¡®è®¤å­—èŠ‚å· N çš„ ACK è¡¨ç¤ºæ‰€æœ‰ç›´åˆ° N çš„å­—èŠ‚ï¼ˆä¸åŒ…æ‹¬ Nï¼‰å·²ç»æˆåŠŸè¢«æ¥æ”¶äº†ã€‚è¿™æ ·çš„å¥½å¤„æ˜¯å¦‚æœä¸€ä¸ª ACK ä¸¢å¤±ï¼Œå¾ˆå¯èƒ½åç»­çš„ ACK å°±è¶³ä»¥ç¡®è®¤å‰é¢çš„æŠ¥æ–‡æ®µäº†ã€‚ ä¸€ä¸ªå®Œæ•´çš„ TCP è¿æ¥æ˜¯åŒå‘å’Œå¯¹ç§°çš„ï¼Œæ•°æ®å¯ä»¥åœ¨ä¸¤ä¸ªæ–¹å‘ä¸Šå¹³ç­‰åœ°æµåŠ¨ã€‚ç»™ä¸Šå±‚åº”ç”¨ç¨‹åºæä¾›ä¸€ç§åŒå·¥æœåŠ¡ã€‚ä¸€æ—¦å»ºç«‹äº†ä¸€ä¸ªè¿æ¥ï¼Œè¿™ä¸ªè¿æ¥çš„ä¸€ä¸ªæ–¹å‘ä¸Šçš„æ¯ä¸ª TCP æŠ¥æ–‡æ®µéƒ½åŒ…å«äº†ç›¸åæ–¹å‘ä¸Šçš„æŠ¥æ–‡æ®µçš„ä¸€ä¸ª ACKã€‚ åºåˆ—å·çš„ä½œç”¨æ˜¯ä½¿å¾—ä¸€ä¸ª TCP æ¥æ”¶ç«¯å¯ä¸¢å¼ƒé‡å¤çš„æŠ¥æ–‡æ®µï¼Œè®°å½•ä»¥æ‚ä¹±æ¬¡åºåˆ°è¾¾çš„æŠ¥æ–‡æ®µã€‚å› ä¸º TCP ä½¿ç”¨ IP æ¥ä¼ è¾“æŠ¥æ–‡æ®µï¼Œè€Œ IP ä¸æä¾›é‡å¤æ¶ˆé™¤æˆ–è€…ä¿è¯æ¬¡åºæ­£ç¡®çš„åŠŸèƒ½ã€‚å¦ä¸€æ–¹é¢ï¼ŒTCP æ˜¯ä¸€ä¸ªå­—èŠ‚æµåè®®ï¼Œç»ä¸ä¼šä»¥æ‚ä¹±çš„æ¬¡åºç»™ä¸Šå±‚ç¨‹åºå‘é€æ•°æ®ã€‚å› æ­¤ TCP æ¥æ”¶ç«¯ä¼šè¢«è¿«å…ˆä¿æŒå¤§åºåˆ—å·çš„æ•°æ®ä¸äº¤ç»™åº”ç”¨ç¨‹åºï¼Œç›´åˆ°ç¼ºå¤±çš„å°åºåˆ—å·çš„æŠ¥æ–‡æ®µè¢«å¡«æ»¡ã€‚ TCPæŠ¥æ–‡å¤´éƒ¨ æºç«¯å£å’Œç›®çš„ç«¯å£ï¼Œå„å 2ä¸ªå­—èŠ‚ï¼› åºå·ï¼Œå 4ä¸ªå­—èŠ‚ï¼ŒTCPè¿æ¥ä¸­ä¼ é€çš„å­—èŠ‚æµä¸­çš„æ¯ä¸ªå­—èŠ‚éƒ½æŒ‰é¡ºåºç¼–å·ï¼› ç¡®è®¤å·ï¼Œå 4ä¸ªå­—èŠ‚ï¼Œæ˜¯æœŸæœ›æ”¶åˆ°å¯¹æ–¹ä¸‹ä¸€ä¸ªæŠ¥æ–‡çš„ç¬¬ä¸€ä¸ªæ•°æ®å­—èŠ‚çš„åºå·ï¼Œå³æœ€åè¢«æˆåŠŸæ¥æ”¶çš„æ•°æ®å­—èŠ‚åºåˆ—å·åŠ  1ï¼Œè¿™ä¸ªå­—æ®µåªæœ‰åœ¨ ACK ä½è¢«å¯ç”¨çš„æ—¶å€™æ‰æœ‰æ•ˆï¼› æ•°æ®åç§»ï¼Œå 4ä½ï¼Œå®ƒæŒ‡å‡ºTCPæŠ¥æ–‡çš„æ•°æ®è·ç¦»TCPæŠ¥æ–‡æ®µçš„èµ·å§‹å¤„æœ‰å¤šè¿œï¼› ä¿ç•™ï¼Œå 6ä½ï¼Œä¿ç•™ä»Šåä½¿ç”¨ï¼Œä½†ç›®å‰åº”éƒ½ä½0ï¼› ç´§æ€¥URGï¼Œå½“URG=1ï¼Œè¡¨æ˜ç´§æ€¥æŒ‡é’ˆå­—æ®µæœ‰æ•ˆã€‚å‘Šè¯‰ç³»ç»Ÿæ­¤æŠ¥æ–‡æ®µä¸­æœ‰ç´§æ€¥æ•°æ®ï¼› ç¡®è®¤ACKï¼Œä»…å½“ACK=1æ—¶ï¼Œç¡®è®¤å·å­—æ®µæ‰æœ‰æ•ˆã€‚TCPè§„å®šï¼Œåœ¨è¿æ¥å»ºç«‹åæ‰€æœ‰æŠ¥æ–‡çš„ä¼ è¾“éƒ½å¿…é¡»æŠŠACKç½®1ï¼› æ¨é€PSHï¼Œå½“ä¸¤ä¸ªåº”ç”¨è¿›ç¨‹è¿›è¡Œäº¤äº’å¼é€šä¿¡æ—¶ï¼Œæœ‰æ—¶åœ¨ä¸€ç«¯çš„åº”ç”¨è¿›ç¨‹å¸Œæœ›åœ¨é”®å…¥ä¸€ä¸ªå‘½ä»¤åç«‹å³å°±èƒ½æ”¶åˆ°å¯¹æ–¹çš„å“åº”ï¼Œè¿™æ—¶å€™å°±å°†PSH=1ï¼› å¤ä½RSTï¼Œå½“RST=1ï¼Œè¡¨æ˜TCPè¿æ¥ä¸­å‡ºç°ä¸¥é‡å·®é”™ï¼Œå¿…é¡»é‡Šæ”¾è¿æ¥ï¼Œç„¶åå†é‡æ–°å»ºç«‹è¿æ¥ï¼› åŒæ­¥SYNï¼Œåœ¨è¿æ¥å»ºç«‹æ—¶ç”¨æ¥åŒæ­¥åºå·ã€‚å½“SYN=1ï¼ŒACK=0ï¼Œè¡¨æ˜æ˜¯è¿æ¥è¯·æ±‚æŠ¥æ–‡ï¼Œè‹¥åŒæ„è¿æ¥ï¼Œåˆ™å“åº”æŠ¥æ–‡ä¸­åº”è¯¥ä½¿SYN=1ï¼ŒACK=1ï¼› ç»ˆæ­¢FINï¼Œç”¨æ¥é‡Šæ”¾è¿æ¥ã€‚å½“FIN=1ï¼Œè¡¨æ˜æ­¤æŠ¥æ–‡çš„å‘é€æ–¹çš„æ•°æ®å·²ç»å‘é€å®Œæ¯•ï¼Œå¹¶ä¸”è¦æ±‚é‡Šæ”¾ï¼› çª—å£ï¼Œå 2å­—èŠ‚ï¼ŒæŒ‡çš„æ˜¯é€šçŸ¥æ¥æ”¶æ–¹ï¼Œå‘é€æœ¬æŠ¥æ–‡ä½ éœ€è¦æœ‰å¤šå¤§çš„ç©ºé—´æ¥æ¥å—ï¼› æ£€éªŒå’Œï¼Œå 2å­—èŠ‚ï¼Œæ ¡éªŒé¦–éƒ¨å’Œæ•°æ®è¿™ä¸¤éƒ¨åˆ†ï¼› ç´§æ€¥æŒ‡é’ˆï¼Œå 2å­—èŠ‚ï¼ŒæŒ‡å‡ºæœ¬æŠ¥æ–‡æ®µä¸­çš„ç´§æ€¥æ•°æ®çš„å­—èŠ‚æ•°ï¼› TCPçŠ¶æ€è½¬æ¢ çŠ¶ æ€ æ è¿° CLOSED å…³é—­çŠ¶æ€ï¼Œæ²¡æœ‰è¿æ¥æ´»åŠ¨æˆ–æ­£åœ¨è¿›è¡Œ LISTEN ç›‘å¬çŠ¶æ€ï¼ŒæœåŠ¡å™¨æ­£åœ¨ç­‰å¾…è¿æ¥è¿›å…¥ SYN_RCVD æ”¶åˆ°ä¸€ä¸ªè¿æ¥è¯·æ±‚ï¼Œå°šæœªç¡®è®¤ SYN_SENT å·²ç»å‘å‡ºè¿æ¥è¯·æ±‚ï¼Œç­‰å¾…ç¡®è®¤ ESTABLISHED è¿æ¥å»ºç«‹ï¼Œæ­£å¸¸æ•°æ®ä¼ è¾“çŠ¶æ€ FIN_WAIT_1 ï¼ˆä¸»åŠ¨å…³é—­ï¼‰å·²ç»å‘é€å…³é—­è¯·æ±‚ï¼Œç­‰å¾…ç¡®è®¤ FIN_WAIT_2 ï¼ˆä¸»åŠ¨å…³é—­ï¼‰æ”¶åˆ°å¯¹æ–¹å…³é—­ç¡®è®¤ï¼Œç­‰å¾…å¯¹æ–¹å…³é—­è¯·æ±‚ TIMED_WAIT å®ŒæˆåŒå‘å…³é—­ï¼Œç­‰å¾…æ‰€æœ‰åˆ†ç»„æ­»æ‰ CLOSING åŒæ–¹åŒæ—¶å°è¯•å…³é—­ï¼Œç­‰å¾…å¯¹æ–¹ç¡®è®¤ CLOSE_WAIT ï¼ˆè¢«åŠ¨å…³é—­ï¼‰æ”¶åˆ°å¯¹æ–¹å…³é—­è¯·æ±‚ï¼Œå·²ç»ç¡®è®¤ LAST_ACK ï¼ˆè¢«åŠ¨å…³é—­ï¼‰ç­‰å¾…æœ€åä¸€ä¸ªå…³é—­ç¡®è®¤ï¼Œå¹¶ç­‰å¾…æ‰€æœ‰åˆ†ç»„æ­»æ‰ é‚£ä¹ˆçŠ¶æ€è½¬æ¢ä¸ºä»€ä¹ˆè¦ç»å†ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹å‘¢ï¼Ÿ TCPä¸‰æ¬¡æ¡æ‰‹ æœåŠ¡å™¨è¿›ç¨‹å…ˆåˆ›å»ºä¼ è¾“æ§åˆ¶å—TCBï¼Œæ—¶åˆ»å‡†å¤‡æ¥å—å®¢æˆ·è¿›ç¨‹çš„è¿æ¥è¯·æ±‚ï¼Œæ­¤æ—¶æœåŠ¡å™¨å°±è¿›å…¥äº†LISTENï¼ˆç›‘å¬ï¼‰çŠ¶æ€ï¼› å®¢æˆ·ç«¯å…ˆåˆ›å»ºä¼ è¾“æ§åˆ¶å—TCBï¼Œç„¶åå‘æœåŠ¡å™¨å‘å‡ºè¿æ¥è¯·æ±‚æŠ¥æ–‡ï¼ŒSYN=1ï¼Œè¡¨ç¤ºè¯·æ±‚å»ºç«‹è¿æ¥ï¼ŒåŒæ—¶é€‰æ‹©ä¸€ä¸ªåˆå§‹åºåˆ—å· seq=x ï¼Œæ­¤æ—¶ï¼ŒTCPå®¢æˆ·ç«¯è¿›ç¨‹è¿›å…¥äº† SYN_SENTï¼ˆåŒæ­¥å·²å‘é€çŠ¶æ€ï¼‰çŠ¶æ€ã€‚TCPè§„å®šï¼ŒSYNæŠ¥æ–‡æ®µï¼ˆSYN=1çš„æŠ¥æ–‡æ®µï¼‰ä¸èƒ½æºå¸¦æ•°æ®ï¼Œä½†éœ€è¦æ¶ˆè€—æ‰ä¸€ä¸ªåºå·ã€‚ æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚æŠ¥æ–‡åï¼Œå¦‚æœåŒæ„è¿æ¥ï¼Œåˆ™å‘å‡ºç¡®è®¤æŠ¥æ–‡ã€‚ç¡®è®¤æŠ¥æ–‡ä¸­åº”è¯¥ ACK=1ï¼ŒSYN=1ï¼Œç¡®è®¤å·æ˜¯ack=x+1ï¼ŒåŒæ—¶ä¹Ÿè¦ä¸ºè‡ªå·±åˆå§‹åŒ–ä¸€ä¸ªåºåˆ—å· seq=yï¼Œæ­¤æ—¶ï¼ŒTCPæœåŠ¡å™¨è¿›ç¨‹è¿›å…¥äº†SYN_RCVDï¼ˆåŒæ­¥æ”¶åˆ°ï¼‰çŠ¶æ€ã€‚è¿™ä¸ªæŠ¥æ–‡ä¹Ÿä¸èƒ½æºå¸¦æ•°æ®ï¼Œä½†æ˜¯åŒæ ·è¦æ¶ˆè€—ä¸€ä¸ªåºå·ã€‚ Tå®¢æˆ·ç«¯æ”¶åˆ°ç¡®è®¤åï¼Œè¿˜è¦å‘æœåŠ¡å™¨ç»™å‡ºç¡®è®¤ã€‚ç¡®è®¤æŠ¥æ–‡çš„ACK=1ï¼Œack=y+1ï¼Œè‡ªå·±çš„åºåˆ—å·seq=x+1ï¼Œæ­¤æ—¶ï¼ŒTCPè¿æ¥å»ºç«‹ï¼Œå®¢æˆ·ç«¯è¿›å…¥ESTABLISHEDï¼ˆå·²å»ºç«‹è¿æ¥ï¼‰çŠ¶æ€ã€‚TCPè§„å®šï¼ŒACKæŠ¥æ–‡æ®µå¯ä»¥æºå¸¦æ•°æ®ï¼Œä½†æ˜¯å¦‚æœä¸æºå¸¦æ•°æ®åˆ™ä¸æ¶ˆè€—åºå·ã€‚ å½“æœåŠ¡å™¨æ”¶åˆ°å®¢æˆ·ç«¯çš„ç¡®è®¤åä¹Ÿè¿›å…¥ESTABLISHEDçŠ¶æ€ï¼Œä¸‰æ¬¡æ¡æ‰‹ç»“æŸï¼Œè¿æ¥å»ºç«‹ã€‚ ä¸ºä»€ä¹ˆéœ€è¦ç¬¬ä¸‰æ¬¡å®¢æˆ·ç«¯ACKï¼Ÿ ä¸‰æ¬¡æ¡æ‰‹çš„ç›®çš„æ˜¯â€œä¸ºäº†é˜²æ­¢å·²å¤±æ•ˆçš„è¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µçªç„¶åˆä¼ é€åˆ°äº†æœåŠ¡ç«¯ï¼Œå› è€Œäº§ç”Ÿé”™è¯¯ã€‚ä¾‹å¦‚ç½‘ç»œå‡ºç°æŠ–åŠ¨å¯¼è‡´ç¬¬ä¸€æ¬¡SYN=1å¹¶æ²¡æœ‰åŠæ—¶åˆ°è¾¾æœåŠ¡ç«¯ï¼Œä»è€Œå®¢æˆ·ç«¯æ— æ³•æ”¶åˆ°æœåŠ¡ç«¯çš„ACKï¼Œä¼šè§¦å‘å®¢æˆ·ç«¯çš„é‡è¯•ã€‚å¦‚æœåªæœ‰ä¸¤æ¬¡æ¡æ‰‹ï¼Œç¬¬äºŒæ¬¡é‡å‘å»ºç«‹è¿æ¥åï¼Œç¬¬ä¸€æ¬¡å»¶è¿Ÿçš„è¯·æ±‚åˆšå¥½åˆ°è¾¾æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯ä¼šå†æ¬¡å›åŒ…ACKï¼Œè¿™æ ·æœ¬æ¥æ— æ•ˆçš„è¯·æ±‚åˆä¼šå»ºç«‹æ–°çš„è¿æ¥ã€‚å¦‚æœæ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œå®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡ç«¯ACKå¹¶ä¸ä¼šå†æ¬¡å‘å‡ºç¡®è®¤ï¼Œè¿™æ ·å°±ä¸ä¼šæœ‰æ–°çš„è¿æ¥å»ºç«‹ã€‚ TCPå››æ¬¡æŒ¥æ‰‹ä»¥å®¢æˆ·ç«¯ä¸»åŠ¨å…³é—­ä¸ºä¾‹ï¼ŒæœåŠ¡å™¨ç«¯ä¹Ÿå¯ä»¥ä¸»åŠ¨å…³é—­ï¼Œæ–¹å‘ä¸ä¸‹é¢ç›¸åã€‚ å®¢æˆ·ç«¯è¿›ç¨‹å‘å‡ºè¿æ¥é‡Šæ”¾æŠ¥æ–‡ï¼Œå¹¶ä¸”åœæ­¢å‘é€æ•°æ®ã€‚é‡Šæ”¾æ•°æ®æŠ¥æ–‡é¦–éƒ¨ï¼ŒFIN=1ï¼Œå…¶åºåˆ—å·ä¸ºseq=uï¼ˆç­‰äºå‰é¢å·²ç»ä¼ é€è¿‡æ¥çš„æ•°æ®çš„æœ€åä¸€ä¸ªå­—èŠ‚çš„åºå·åŠ 1ï¼‰ï¼Œæ­¤æ—¶ï¼Œå®¢æˆ·ç«¯è¿›å…¥FIN_WAIT_1ï¼ˆç»ˆæ­¢ç­‰å¾…1ï¼‰çŠ¶æ€ã€‚ TCPè§„å®šï¼ŒFINæŠ¥æ–‡æ®µå³ä½¿ä¸æºå¸¦æ•°æ®ï¼Œä¹Ÿè¦æ¶ˆè€—ä¸€ä¸ªåºå·ã€‚ æœåŠ¡å™¨æ”¶åˆ°è¿æ¥é‡Šæ”¾æŠ¥æ–‡ï¼Œå‘å‡ºç¡®è®¤æŠ¥æ–‡ï¼ŒACK=1ï¼Œack=u+1ï¼Œå¹¶ä¸”å¸¦ä¸Šè‡ªå·±çš„åºåˆ—å·seq=vï¼Œæ­¤æ—¶ï¼ŒæœåŠ¡ç«¯å°±è¿›å…¥äº†CLOSE_WAITï¼ˆå…³é—­ç­‰å¾…ï¼‰çŠ¶æ€ã€‚TCPæœåŠ¡å™¨é€šçŸ¥é«˜å±‚çš„åº”ç”¨è¿›ç¨‹ï¼Œå®¢æˆ·ç«¯å‘æœåŠ¡å™¨çš„æ–¹å‘å°±é‡Šæ”¾äº†ï¼Œè¿™æ—¶å€™å¤„äºåŠå…³é—­çŠ¶æ€ï¼Œå³å®¢æˆ·ç«¯å·²ç»æ²¡æœ‰æ•°æ®è¦å‘é€äº†ï¼Œä½†æ˜¯æœåŠ¡å™¨è‹¥å‘é€æ•°æ®ï¼Œå®¢æˆ·ç«¯ä¾ç„¶è¦æ¥å—ã€‚è¿™ä¸ªçŠ¶æ€è¿˜è¦æŒç»­ä¸€æ®µæ—¶é—´ï¼Œä¹Ÿå°±æ˜¯æ•´ä¸ªCLOSE_WAITçŠ¶æ€æŒç»­çš„æ—¶é—´ã€‚ å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨çš„ç¡®è®¤è¯·æ±‚åï¼Œæ­¤æ—¶ï¼Œå®¢æˆ·ç«¯å°±è¿›å…¥FIN_WAIT_2ï¼ˆç»ˆæ­¢ç­‰å¾…2ï¼‰çŠ¶æ€ï¼Œç­‰å¾…æœåŠ¡å™¨å‘é€è¿æ¥é‡Šæ”¾æŠ¥æ–‡ï¼ˆåœ¨è¿™ä¹‹å‰è¿˜éœ€è¦æ¥å—æœåŠ¡å™¨å‘é€çš„æœ€åçš„æ•°æ®ï¼‰ã€‚ æœåŠ¡å™¨å°†æœ€åçš„æ•°æ®å‘é€å®Œæ¯•åï¼Œå°±å‘å®¢æˆ·ç«¯å‘é€è¿æ¥é‡Šæ”¾æŠ¥æ–‡ï¼ŒFIN=1ï¼Œack=u+1ï¼Œç”±äºåœ¨åŠå…³é—­çŠ¶æ€ï¼ŒæœåŠ¡å™¨å¾ˆå¯èƒ½åˆå‘é€äº†ä¸€äº›æ•°æ®ï¼Œå‡å®šæ­¤æ—¶çš„åºåˆ—å·ä¸ºseq=wï¼Œæ­¤æ—¶ï¼ŒæœåŠ¡å™¨å°±è¿›å…¥äº†LAST_ACKï¼ˆæœ€åç¡®è®¤ï¼‰çŠ¶æ€ï¼Œç­‰å¾…å®¢æˆ·ç«¯çš„ç¡®è®¤ã€‚ å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨çš„è¿æ¥é‡Šæ”¾æŠ¥æ–‡åï¼Œå¿…é¡»å‘å‡ºç¡®è®¤ï¼ŒACK=1ï¼Œack=w+1ï¼Œè€Œè‡ªå·±çš„åºåˆ—å·æ˜¯seq=u+1ï¼Œæ­¤æ—¶ï¼Œå®¢æˆ·ç«¯å°±è¿›å…¥äº†TIME_WAITï¼ˆæ—¶é—´ç­‰å¾…ï¼‰çŠ¶æ€ã€‚æ³¨æ„æ­¤æ—¶TCPè¿æ¥è¿˜æ²¡æœ‰é‡Šæ”¾ï¼Œå¿…é¡»ç»è¿‡2*MSLï¼ˆæœ€é•¿æŠ¥æ–‡æ®µå¯¿å‘½ï¼‰çš„æ—¶é—´åï¼Œå½“å®¢æˆ·ç«¯æ’¤é”€ç›¸åº”çš„TCBåï¼Œæ‰è¿›å…¥CLOSEDçŠ¶æ€ã€‚ æœåŠ¡å™¨åªè¦æ”¶åˆ°äº†å®¢æˆ·ç«¯å‘å‡ºçš„ç¡®è®¤ï¼Œç«‹å³è¿›å…¥CLOSEDçŠ¶æ€ï¼Œæ’¤é”€TCBç»“æŸTCPè¿æ¥ã€‚ ä¸ºä»€ä¹ˆä¸»åŠ¨å…³é—­è¿æ¥æ–¹æœ€åéœ€è¦ç­‰å¾…2MSLï¼Ÿ MSLï¼ˆMaximum Segment Lifetimeï¼‰ï¼ŒæŠ¥æ–‡æœ€å¤§ç”Ÿå­˜æ—¶é—´ã€‚ä¿è¯å®¢æˆ·ç«¯å‘é€çš„æœ€åä¸€ä¸ªACKæŠ¥æ–‡èƒ½å¤Ÿåˆ°è¾¾æœåŠ¡å™¨ï¼Œå¦‚æœå› ä¸ºç½‘ç»œåŸå› å¯¼è‡´æœåŠ¡å™¨æ²¡æ”¶åˆ°ï¼ŒæœåŠ¡å™¨ä¼šé‡æ–°å‘é€ä¸€æ¬¡FIN+ackè¯·æ±‚å…³é—­è¿æ¥ï¼Œå®¢æˆ·ç«¯å°±èƒ½æ”¶åˆ°è¿™ä¸ªé‡ä¼ çš„æŠ¥æ–‡å†æ¬¡ACKï¼Œå¹¶ä¸”é‡å¯2MSLè®¡æ—¶å™¨ã€‚é˜²æ­¢ç±»ä¼¼ä¸â€œä¸‰æ¬¡æ¡æ‰‹â€ä¸­æåˆ°äº†çš„â€œå·²ç»å¤±æ•ˆçš„è¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µçªç„¶åˆä¼ é€åˆ°äº†æœåŠ¡ç«¯ï¼Œå› è€Œäº§ç”Ÿé”™è¯¯â€ã€‚å®¢æˆ·ç«¯å‘é€å®Œæœ€åä¸€ä¸ªç¡®è®¤æŠ¥æ–‡åï¼Œåœ¨è¿™ä¸ª2MSLæ—¶é—´ä¸­ï¼Œå°±å¯ä»¥ä½¿æœ¬è¿æ¥æŒç»­çš„æ—¶é—´å†…æ‰€äº§ç”Ÿçš„æ‰€æœ‰æŠ¥æ–‡æ®µéƒ½ä»ç½‘ç»œä¸­æ¶ˆå¤±ï¼Œæ–°çš„è¿æ¥ä¸­ä¸ä¼šå‡ºç°æ—§è¿æ¥çš„è¯·æ±‚æŠ¥æ–‡ã€‚éœ€è¦æ³¨æ„çš„æ˜¯åœ¨TIME_WAITçŠ¶æ€ æ—¶ä¸¤ç«¯çš„ç«¯å£ä¸èƒ½ä½¿ç”¨ï¼Œå®¢æˆ·ç«¯è¦ç­‰åˆ°2MSLæ—¶é—´ç»“æŸæ‰å¯ç»§ç»­ä½¿ç”¨ã€‚ ä¸ºä»€ä¹ˆå…³é—­è¿æ¥éœ€è¦å››æ¬¡æŒ¥æ‰‹ï¼Œæ¯”å»ºç«‹è¿æ¥å¤šä¸€æ¬¡å‘¢ï¼Ÿ å»ºç«‹è¿æ¥çš„æ—¶å€™ï¼Œ æœåŠ¡å™¨åœ¨LISTENçŠ¶æ€ä¸‹ï¼Œæ”¶åˆ°å»ºç«‹è¿æ¥è¯·æ±‚çš„SYNæŠ¥æ–‡åï¼ŒæŠŠACKå’ŒSYNæ”¾åœ¨ä¸€ä¸ªæŠ¥æ–‡é‡Œå‘é€ç»™å®¢æˆ·ç«¯ã€‚è€Œå…³é—­è¿æ¥æ—¶ï¼ŒACKå’ŒSYNæ˜¯åˆ†å¼€å‘é€çš„ï¼ŒæœåŠ¡å™¨æ”¶åˆ°å¯¹æ–¹çš„FINæŠ¥æ–‡æ—¶ï¼Œä»…ä»…è¡¨ç¤ºå®¢æˆ·ç«¯è¯·æ±‚å…³é—­ä½†æ˜¯è¿˜èƒ½æ¥æ”¶æ•°æ®ï¼Œè€Œä¸”æœåŠ¡å™¨çš„æ•°æ®å¯èƒ½ä¹Ÿæ²¡æœ‰å‘é€å®Œæ¯•ï¼Œæ‰€ä»¥æœåŠ¡å™¨å¯ä»¥é€‰æ‹©ç«‹å³å…³é—­FINä¹Ÿå¯ä»¥å†å‘é€ä¸€éƒ¨åˆ†æ•°æ®ç„¶åå†å‘é€FINæŠ¥æ–‡ç»™å®¢æˆ·ç«¯å…³é—­è¿æ¥ï¼Œç”±äºæœåŠ¡å™¨ACKå’ŒFINåˆ†å¼€å‘é€ï¼Œæ‰€ä»¥å¤šäº†ä¸€æ¬¡ã€‚ å¦‚æœé€šä¿¡åŒæ–¹åŒæ—¶è¯·æ±‚è¿æ¥æˆ–åŒæ—¶è¯·æ±‚é‡Šæ”¾è¿æ¥ï¼Ÿ è¿™ç§æƒ…å†µè™½ç„¶å‘ç”Ÿçš„å¯èƒ½æ€§æå°ï¼Œä½†æ˜¯æ˜¯ç¡®å®å­˜åœ¨çš„ï¼ŒTCPä¹Ÿç‰¹æ„è®¾è®¡äº†ç›¸å…³æœºåˆ¶ï¼Œä½¿å¾—åœ¨è¿™ç§æƒ…å†µä¸‹åŒæ–¹ä»…å»ºç«‹ä¸€æ¡è¿æ¥ã€‚åŒæ–¹åŒæ—¶è¯·æ±‚è¿æ¥çš„æƒ…å†µä¸‹ï¼ŒåŒæ–¹åŒæ—¶å‘å‡ºè¯·æ±‚è¿æ¥æŠ¥æ–‡ï¼Œå¹¶è¿›å…¥SYN_SENTçŠ¶æ€ï¼›å½“æ”¶åˆ°å¯¹æ–¹çš„è¯·æ±‚è¿æ¥æŠ¥æ–‡åï¼Œä¼šå†æ¬¡å‘é€è¯·æ±‚è¿æ¥æŠ¥æ–‡ï¼Œç¡®è®¤å·ä¸ºå¯¹æ–¹çš„SYN+1ï¼Œå¹¶è¿›å…¥SYN_RCVDçŠ¶æ€ï¼›å½“æ”¶åˆ°å¯¹æ–¹ç¬¬äºŒæ¬¡å‘å‡ºçš„æºå¸¦ç¡®è®¤å·çš„è¯·æ±‚æŠ¥æ–‡ä¹‹åï¼Œä¼šè¿›å…¥ESTABLISHEDçŠ¶æ€ã€‚ åŒæ–¹åŒæ—¶è¯·æ±‚é‡Šæ”¾è¿æ¥ä¹Ÿæ˜¯åŒæ ·çš„ï¼ŒåŒæ–¹åŒæ—¶å‘å‡ºè¿æ¥é‡Šæ”¾æŠ¥æ–‡ï¼Œå¹¶è¿›å…¥FIN_WAIT_1çŠ¶æ€ï¼›åœ¨æ”¶åˆ°å¯¹æ–¹çš„æŠ¥æ–‡ä¹‹åï¼Œå‘é€ç¡®è®¤æŠ¥æ–‡ï¼Œå¹¶è¿›å…¥CLOSINGçŠ¶æ€ï¼›åœ¨æ”¶åˆ°å¯¹æ–¹çš„ç¡®è®¤æŠ¥æ–‡åï¼Œè¿›å…¥TIME_WAITçŠ¶æ€ï¼Œç­‰å¾…2MSLä¹‹åå…³é—­è¿æ¥ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªæ—¶å€™è™½ç„¶ä¸ç”¨å†æ¬¡å‘é€ç¡®è®¤æŠ¥æ–‡å¹¶ç¡®è®¤å¯¹æ–¹æ”¶åˆ°ï¼ŒåŒæ–¹ä»éœ€ç­‰å¾…2MSLä¹‹åå†å…³é—­è¿æ¥ï¼Œæ˜¯ä¸ºäº†é˜²æ­¢â€œå·²å¤±æ•ˆçš„è¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µâ€çš„å½±å“ã€‚ TIME_WAITçŠ¶æ€ é¦–å…ˆTIME_WAITçŠ¶æ€æ˜¯æ‰§è¡Œä¸»åŠ¨å…³é—­çš„é‚£ä¸€ç«¯äº§ç”Ÿçš„ï¼Œä»ä¸Šé¢2MSLä¸­æˆ‘ä»¬äº†è§£TIME_WAITçŠ¶æ€æœ‰ä¸¤ä¸ªå­˜åœ¨çš„ç†ç”±:å¯é åœ°å®ç°TCPå…¨åŒå·¥è¿æ¥çš„ç»ˆæ­¢ï¼Œå³æœ€åä¸€æ¬¡ACKå¦‚æœä¸¢å¤±ï¼Œå¯ä»¥é‡æ–°å‘é€FINå¹¶å†æ¬¡ACKï¼›å…è®¸è€çš„é‡å¤åˆ†èŠ‚åœ¨ç½‘ç»œä¸­æ¶ˆé€ï¼Œæ–°çš„è¿æ¥ä¸­ä¸ä¼šå‡ºç°æ—§è¿æ¥çš„è¯·æ±‚æŠ¥æ–‡ï¼›åœ¨é«˜å¹¶å‘çŸ­è¿æ¥çš„TCPæœåŠ¡å™¨ä¸Šï¼Œå½“æœåŠ¡å™¨å¤„ç†å®Œè¯·æ±‚åç«‹åˆ»æŒ‰ç…§ä¸»åŠ¨æ­£å¸¸å…³é—­è¿æ¥ã€‚è¿™ä¸ªåœºæ™¯ä¸‹ï¼Œä¼šå‡ºç°å¤§é‡socketå¤„äºTIME_WAITçŠ¶æ€ã€‚å¦‚æœå®¢æˆ·ç«¯çš„å¹¶å‘é‡æŒç»­å¾ˆé«˜ï¼Œå¤§é‡ç«¯å£å¤„äºTIME_WAITçŠ¶æ€ï¼Œæ— æ³•æ­£å¸¸ä½¿ç”¨ï¼Œæ­¤æ—¶éƒ¨åˆ†å®¢æˆ·ç«¯å°±ä¼šæ˜¾ç¤ºè¿æ¥ä¸ä¸Šï¼Œæ‰€ä»¥éœ€è¦å¼•èµ·é‡è§†ã€‚ å‚è€ƒğŸ“šï¼šTCPçš„ä¸‰æ¬¡æ¡æ‰‹ä¸å››æ¬¡æŒ¥æ‰‹]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>TCP</tag>
        <tag>ç½‘ç»œ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è‡ªå»ºShadowsocksé¢‘ç¹è¢«å°ï¼Ÿèµ¶ç´§è¯•è¯•simple-obfsæµé‡æ··æ·†å§]]></title>
    <url>%2F2019%2F04%2Fshadowsocks-simple-obfs.html</url>
    <content type="text"><![CDATA[å¹´åç”¨çš„ä¸€ç›´æŒºç¨³çš„æ¬ç“¦å·¥VPSæ­å»ºçš„Shadowsocksç«¯å£é¢‘ç¹è¢«å°ï¼Œæ¢äº†å‡ æ¬¡ç«¯å£åæ„Ÿè§‰å¤ªéº»çƒ¦ï¼Œäºæ˜¯å†³å®šç½‘ä¸Šæ‰¾æ‰¾æœ‰æ²¡æœ‰å¥½çš„æ€è·¯ï¼Œäºæ˜¯å‘ç°äº†simple-obfs,å…¶æ€è·¯æ˜¯sså®¢æˆ·ç«¯å¯¹Shadowsocksæµé‡æ··æ·†åŠ å¯†ä¼ªè£…æˆæ­£å¸¸httpæˆ–è€…httpsæµé‡ï¼ŒæœåŠ¡ç«¯ss-serverå†å¯¹æµé‡è§£å¯†ï¼Œä»¥æ­¤èº²è¿‡GFWçš„å°æ€ã€‚è¿™ä¸ªæ–¹æ¡ˆæŒºæœ‰æ„æ€ï¼Œå¾ˆå¤šäººåˆå†æ­¤åŸºç¡€ä¸Šè¿›è¡Œäº†æ›´å¤šçš„ä¼ªè£…æ‰©å±•ï¼Œç¨³å®šæ€§æ¯”ä¹‹å‰çº¯ShadowsocksæµåŠ å¯†æ›´å®‰å…¨ã€‚ä¸è¿‡åŸä½œè€…å·²ç»ä¸å†ç»´æŠ¤æ­¤é¡¹ç›®è€Œæ˜¯è½¬å…¥äº†v2ray-pluginï¼Œç”±äºæœ¬äººä½¿ç”¨çš„è·¯ç”±å™¨SSå›ºä»¶åªæ”¯æŒsimple-obfsæ’ä»¶æ¨¡å¼ï¼Œå› æ­¤å†³å®šè¿˜æ˜¯å…ˆè¯•è¯•simple-obfsçš„æ•ˆæœã€‚éœ€è¦ï¼š shadowsocks-libev simple-obfs VPS Nginx æ”¯æŒsimple-obfsæ’ä»¶æ¨¡å¼çš„sså®¢æˆ·ç«¯ å®‰è£…é¦–å…ˆå®‰è£…shadowsockï¼Œä½¿ç”¨shadowsocks-libev,æ­¤é¡¹ç›®æ”¯æŒæ’ä»¶æ¨¡å¼ä½¿ç”¨simple-obfsï¼Œå…·ä½“éƒ¨ç½²å¯ä»¥æŸ¥çœ‹githubä¸»é¡µã€‚å½“ç„¶å¦‚æœå›¾çœäº‹ä¹Ÿå¯ä»¥ä½¿ç”¨åˆ«äººçš„ä¸€é”®å®‰è£…è„šæœ¬ï¼Œä¾‹å¦‚shadowsocks_install, 123wget --no-check-certificate -O shadowsocks-all.sh &lt;https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocks-all.sh&gt;chmod +x shadowsocks-all.sh./shadowsocks-all.sh 2&gt;&amp;1 | tee shadowsocks-all.log è¾“å…¥å…·ä½“å‚æ•°ä¸€è·¯å‘ä¸‹å³å¯ã€‚ é…ç½®ss-serverï¼šæœ€åç”Ÿæˆçš„/etc/shadowsocks-libev/config.jsoné…ç½®å¦‚ä¸‹æ ¼å¼ã€‚ 12345678910111213&#123; "server":"0.0.0.0", "server_port":port, "password":"password", "timeout":300, "user":"nobody", "method":"chacha20-ietf-poly1305", "fast_open":false, "nameserver":"8.8.8.8", "mode":"tcp_and_udp", "plugin":"obfs-server", "plugin_opts":"obfs=http"&#125; method:åŠ å¯†æ–¹å¼ï¼Œæ¨èä½¿ç”¨AEADç®—æ³•ï¼Œæ¯”å¦‚chacha20ï¼Œaes-256-cfb å’Œ rc4-md5å·²ç»ä¸å†å®‰å…¨,å¾ˆå®¹æ˜“è¯†åˆ«ã€‚ pluginï¼šä½¿ç”¨obfs-serveræ’ä»¶ plugin_optsï¼šæ··æ·†å‚æ•°ï¼Œobfs æœ‰ tls å’Œ http ä¸¤ç§ç±»å‹ï¼Œæ ¹æ®ä½ æ··æ·†çš„ç±»å‹è®¾ç½®å§ï¼Œå’Œåé¢è¦ä¿æŒä¸€è‡´ Nginxï¼šä¹‹å‰æˆ‘ä»¬æ²¡å¯ç”¨ simple-obfsï¼Œss-server å’Œss-localç›´æ¥è¿›è¡Œæ•°æ®äº¤æ¢ï¼Œå¾ˆå®¹æ˜“åˆ«è¯†åˆ«å‡ºæ¥ã€‚ç°åœ¨ss-localé€šè¿‡simple-obfsä¼ªè£…ï¼Œss-server å†æ‹¿æ‰è¿™å±‚ä¼ªè£…è¿›è¡Œæ•°æ®äº¤æ¢ï¼Œè¿™æ ·å¯é æ€§å°±å¾—åˆ°æå‡ï¼Œæˆ‘ä»¬çš„ç›®çš„æ˜¯è®©ss-localçš„æµé‡æ›´åƒæ­£å¸¸çš„httpæµé‡ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨VPSä¸Š80ç«¯å£å’Œ443ç«¯å£éƒ¨ç½²ä¸€ä¸ªé™æ€ç«™ç‚¹ï¼Œå¹¶ç”³è¯·ä¸€ä¸ªåŸŸåï¼Œå†ç”¨Nginxå†åšä¸€å±‚åå‘ä»£ç†ï¼Œæ­£å¸¸æµé‡ç›´æ¥è®¿é—®é™æ€ç«™ç‚¹ï¼Œè€Œss-localè¿›è¡Œsimple-obfsæ··æ·†åŸŸåçš„æµé‡åˆ™ä»£ç†åˆ°ss-serverä¸Šå»ï¼Œè¿™æ ·ä»å¤–è¡¨ä¸Šçœ‹æˆ‘ä»¬æ˜¯å»è®¿é—®VPSä¸Šéƒ¨ç½²çš„ç½‘ç«™ï¼Œè€Œå®é™…å´æ˜¯å’Œss-localè¿›è¡Œæ•°æ®äº¤äº’ã€‚ nginxé…ç½®å‚è€ƒå¦‚ä¸‹ï¼Œç«¯å£ç”¨80ã€443ã€8080ç­‰å¸¸ç”¨ç«¯å£æ›´ç¬¦åˆhttpé€»è¾‘ã€‚ 1234567891011121314151617181920212223server&#123; listen 80; server_name your domain; index index.html index.htm index.php default.html default.htm default.php; charset utf-8; location / &#123; root /home/wwwroot/...; autoindex on; &#125; location =/ &#123; root /home/wwwroot/...; proxy_http_version 1.1; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection "upgrade"; if ($http_upgrade = "websocket") &#123; proxy_pass http://127.0.0.1:ss-local port; &#125; &#125; access_log off;&#125; å¥½äº†ï¼ŒæœåŠ¡ç«¯çš„éƒ¨ç½²åˆ°æ­¤å·®ä¸å¤šç»“æŸäº†ï¼Œä¸‹é¢æ˜¯å®¢æˆ·ç«¯çš„ä¸€äº›é…ç½® Windows:shadowsocks-windowséœ€è¦å®‰è£…obfs-localæ’ä»¶ï¼Œå¹¶å¼•å…¥é…ç½®ä¸­ 1234567891011&#123; "server": "your domain", "server_port": 80, "password": "your password", "method": "chacha20-ietf-poly1305", "plugin": "obfs-local", "plugin_opts": "obfs=http;obfs-host=your domain", "plugin_args": "", "remarks": "", "timeout": 5&#125; Androidï¼šGitHub | Google Play ä¸‹è½½æ··æ·†æ’ä»¶ï¼ŒShadowsocks Android å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶ä¸‹é€‰å– simple-obfs æ’ä»¶ï¼Œé…ç½®é¡¹ï¼š 12Obfuscation wrappper: httpObfuscation hostname: your domain Padavan:å¦‚æœä½ çš„è·¯ç”±å™¨å’Œæˆ‘ä¸€æ ·ä½¿ç”¨Padavanï¼Œå¯ä»¥åœ¨ssé…ç½®é¡µé¢è®¾ç½®å¦‚ä¸‹ æ’ä»¶åç§°ï¼šobfs-local æ’ä»¶å‚æ•°ï¼šobfs=http;obfs-host=your domain å¥½äº†ï¼Œåˆ°æ­¤æ•´ä¸ªä»å®¢æˆ·ç«¯åˆ°æœåŠ¡ç«¯çš„æµé‡æ··æ·†åŠ å¯†å®Œæˆï¼Œå¼€å§‹ä½“éªŒæ–°çš„æ¨¡å¼çš„å§ï¼Œä¸ªäººæ„Ÿè§‰è¿˜æ˜¯æŒºç¨³çš„ã€‚ shadowsocks-libevç›¸å…³å‘½ä»¤12345å¯åŠ¨ï¼š/etc/init.d/shadowsocks-libev startåœæ­¢ï¼š/etc/init.d/shadowsocks-libev stopé‡å¯ï¼š/etc/init.d/shadowsocks-libev restartçŠ¶æ€ï¼š/etc/init.d/shadowsocks-libev status systemctl status shadowsocks-libev å¼€å¯BBRåŠ é€Ÿ BBR æ˜¯Google TCPæ‹¥å¡æ§åˆ¶ç®—æ³•ï¼Œèƒ½æœ€å¤§åŒ–åˆ©ç”¨ç½‘ç»œä¸Šç“¶é¢ˆé“¾è·¯çš„å¸¦å®½ï¼Œé™ä½ç½‘ç»œé“¾è·¯ä¸Šçš„ buffer å ç”¨ç‡ï¼Œä»è€Œé™ä½å»¶è¿Ÿï¼Œå®é™…æµ‹è¯•å¯¹ç½‘é€Ÿæå‡å¾ˆå¤§ã€‚ä» 4.9 å¼€å§‹ï¼ŒLinux å†…æ ¸å·²ç»ç”¨ä¸Šäº†è¯¥ç®—æ³•ã€‚ å®‰è£…ï¼šæ¨èä½¿ç”¨ä¸€é”®è„šæœ¬ 1wget --no-check-certificate https://github.com/teddysun/across/raw/master/bbr.sh &amp;&amp; chmod +x bbr.sh &amp;&amp; ./bbr.sh å®‰è£…å®Œæˆåï¼Œè„šæœ¬ä¼šæç¤ºéœ€è¦é‡å¯ VPSï¼Œè¾“å…¥ y å¹¶å›è½¦åé‡å¯ã€‚ é‡å¯å®Œæˆåï¼Œè¿›å…¥ VPSï¼ŒéªŒè¯ä¸€ä¸‹æ˜¯å¦æˆåŠŸå®‰è£…æœ€æ–°å†…æ ¸å¹¶å¼€å¯ TCP BBRï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š 12$ uname -r4.9.0-3-amd64 æŸ¥çœ‹å†…æ ¸ç‰ˆæœ¬ï¼Œæ˜¾ç¤ºä¸ºæœ€æ–°ç‰ˆå°±è¡¨ç¤º OK äº† ä¸€äº›æ£€æµ‹å‘½ä»¤:12$ sysctl net.ipv4.tcp_available_congestion_controlnet.ipv4.tcp_available_congestion_control = bbr cubic reno 12$ sysctl net.ipv4.tcp_congestion_controlnet.ipv4.tcp_congestion_control = bbr 12$ sysctl net.core.default_qdiscnet.core.default_qdisc = fq 12$ lsmod | grep bbrtcp_bbr 16384 28]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>ç§‘å­¦ä¸Šç½‘</tag>
        <tag>Shadowsocks</tag>
        <tag>simple-obfs</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[hexoå’Œä¸»é¢˜å¤šè®¾å¤‡åŒæ­¥]]></title>
    <url>%2F2019%2F04%2Fhexo-themes-subtree.html</url>
    <content type="text"><![CDATA[ä½¿ç”¨hexoå¯ä»¥ç”Ÿæˆé™æ€ç½‘é¡µéƒ¨ç½²åˆ°GitHubå’ŒVPSä¸Šæ­å»ºä¸ªäººåšå®¢ï¼Œä½†æ˜¯hexoçš„éƒ¨ç½²éƒ½æ˜¯åœ¨æœ¬åœ°ï¼Œå¦‚æœæ¢äº†ä¸€å¥—ç¯å¢ƒå¦‚ä½•ä¹Ÿèƒ½å¤Ÿç¼–è¾‘å‘å¸ƒè‡ªå·±çš„åšå®¢ç½‘ç«™å‘¢ï¼Ÿ åŒæ­¥æ–¹æ¡ˆç”±äºéƒ¨ç½²åšå®¢å·²ç»ä½¿ç”¨äº†githubä»“åº“æ‰˜ç®¡ç½‘é¡µä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘ä½¿ç”¨è¿™ä¸ªæ¥åšhexoéƒ¨ç½²å‘å¸ƒç®¡ç†çš„ç‰ˆæœ¬æ§åˆ¶ï¼Œç”±äºéƒ¨ç½²çš„ç½‘ç«™é»˜è®¤ä½¿ç”¨äº†masteråˆ†æ”¯ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªæ–°çš„åˆ†æ”¯hexoæˆ–è€…æ–°å»ºä¸€ä¸ªä»“åº“æ¥ç®¡ç†ã€‚ ä¸‹é¢æ­¥éª¤é»˜è®¤å·²ç»å®‰è£…å¥½äº†hexoå¹¶ä¸”å·²ç»æˆåŠŸéƒ¨ç½²ç½‘ç«™ï¼Œé¦–å…ˆåˆ‡æ¢åˆ°hexoä¸»ç›®å½•ï¼Œgit initè¿›è¡Œåˆå§‹åŒ–ï¼Œå¦‚æœå·²ç»çº³å…¥gitç®¡ç†å¹¶ä¸”å…³è”äº†è¿œç¨‹ä»“åº“ï¼Œå¯èƒ½éœ€è¦åˆ é™¤é‡æ–°å…³è”ã€‚ 1234567891011121314# git åˆå§‹åŒ–$ git init# æŸ¥çœ‹å…³è”çš„è¿œç¨‹ä»“åº“$ git remote# åˆ é™¤$ git remote rm origin# è®¾ç½®æ–°çš„è¿œç¨‹ä»“åº“$ git remote add origin git@github.com:Elietio/Elietio.github.io.git# masteråˆ†æ”¯ä¼šä½œä¸ºç½‘ç«™éƒ¨ç½²åˆ†æ”¯ï¼Œå› æ­¤æˆ‘ä»¬åˆ‡æ¢ä¸€ä¸ªæ–°çš„åˆ†æ”¯hexo$ git checkout -b hexo# æ¨é€è¿œç¨‹$ git add .$ git commit -m ""$ git push -u origin hexo åˆ°è¿™ä¸€æ­¥ä¼¼ä¹å·²ç»å¤§åŠŸå‘Šæˆäº†ï¼Œç„¶è€Œï¼Œå¦‚æœä½ ä½¿ç”¨äº†ç¬¬ä¸‰æ–¹ä¸»é¢˜ï¼Œå¹¶ä¸”æ˜¯ç›´æ¥git cloneï¼Œä½ ä¼šå‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œä¸Šä¼ çš„themes/ä¸‹é¢ä¸»é¢˜æ˜¯ç©ºç›®å½•ï¼Œå› ä¸ºgitæ— æ³•ç›´æ¥ç®¡ç†è¿™æ ·çš„åµŒå¥—æ¨¡å—ï¼Œé‚£ä¹ˆè¯¥æ€ä¹ˆåšå‘¢ï¼Ÿæœ€æš´åŠ›ï¼Œç›´æ¥å–æ¶ˆä¸»é¢˜æ¨¡å—çš„gitç®¡ç†ï¼Œä½†æ˜¯è¿™æ ·åç»­ä¸»é¢˜æ¨¡å—çš„æ›´æ–°å°±æ˜¯ä¸€ä¸ªé—®é¢˜äº†ï¼Œæ‰€ä»¥ä¸æ¨èï¼Œå¥½åœ¨æˆ‘ä»¬å¯ä»¥é€šè¿‡gitçš„submoduleæˆ–subtreeæ¥å®ç°ï¼Œå¯¹äºgit cloneå®‰è£…çš„å…¶å®ƒä¸»é¢˜å’Œæ’ä»¶éƒ½å¯ä»¥æŒ‰ç…§è¿™ä¸ªæ€è·¯ã€‚ git submodule vs git subtreeç®€å•æ¥è¯´ï¼Œsubmodule å’Œ subtree æœ€å¤§çš„åŒºåˆ«æ˜¯ï¼Œsubmodule ä¿å­˜çš„æ˜¯å­ä»“åº“çš„ linkï¼Œè€Œ subtree ä¿å­˜çš„æ˜¯å­ä»“åº“çš„ copyã€‚ git submodulechild ç›®å½•è¢«å½“åšä¸€ä¸ªç‹¬ç«‹çš„ Git ä»“åº“ï¼Œæ‰€æœ‰çš„ Git å‘½ä»¤éƒ½å¯ä»¥åœ¨ child ç›®å½•ä»¥åŠä¸Šå±‚é¡¹ç›®ä¸‹ç‹¬ç«‹å·¥ä½œã€‚å°½ç®¡ child æ˜¯å­ç›®å½•ï¼Œå½“ä½ ä¸åœ¨ child ç›®å½•æ—¶å¹¶ä¸è®°å½•å®ƒçš„å†…å®¹ã€‚è€Œå½“ä½ åœ¨é‚£ä¸ªå­ç›®å½•é‡Œä¿®æ”¹å¹¶æäº¤æ—¶ï¼Œå­é¡¹ç›®ä¼šé€šçŸ¥é‚£é‡Œçš„ HEAD å·²ç»å‘ç”Ÿå˜æ›´å¹¶è®°å½•ä½ å½“å‰æ­£åœ¨å·¥ä½œçš„é‚£ä¸ªæäº¤ã€‚è€Œæ­¤æ—¶ä¸Šå±‚é¡¹ç›®ä¼šæ˜¾ç¤º child ç›®å½•ä¸‹çš„æ”¹åŠ¨ï¼Œå°†å®ƒè®°å½•æˆæ¥è‡ªé‚£ä¸ªä»“åº“çš„ä¸€ä¸ªç‰¹æ®Šçš„æäº¤ã€‚ è‹¥ä»–äººè¦å…‹éš†è¯¥é¡¹ç›®ï¼Œä¼šå‘ç° child ç›®å½•ä¸ºç©ºã€‚è¿™æ—¶éœ€è¦æ‰§è¡Œ git submodule init æ¥åˆå§‹åŒ–ä½ çš„æœ¬åœ°é…ç½®æ–‡ä»¶ï¼Œä»¥åŠ git submodule update æ‹‰å–æ•°æ®å¹¶åˆ‡æ¢åˆ°åˆé€‚çš„æäº¤ã€‚è€Œåæ¯æ¬¡ä»ä¸»é¡¹ç›®æ‹‰å–å­æ¨¡å—çš„å˜æ›´æ—¶ï¼Œç”±äºä¸»é¡¹ç›®åªæ›´æ–°äº†å­æ¨¡å—æäº¤çš„å¼•ç”¨è€Œæ²¡æœ‰æ›´æ–°å­æ¨¡å—ç›®å½•ä¸‹çš„ä»£ç ï¼Œå¿…é¡»æ‰§è¡Œ git submodule update æ¥æ›´æ–°å­æ¨¡å—ä»£ç ã€‚ git subtreeä¸åŒäº git submoduleï¼Œæ­¤æ—¶çš„ child ä»…ä»…æ˜¯å«æœ‰ç›¸å…³ä»£ç çš„æ™®é€šç›®å½•ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ Git ä»“åº“ã€‚å› æ­¤å½“åœ¨ child è¿›è¡Œä¿®æ”¹æ—¶ï¼Œä¸Šå±‚é¡¹ç›®ä¼šç«‹åˆ»è®°å½•å…¶æ”¹åŠ¨ï¼Œè€Œä¸æ˜¯åƒä¹‹å‰é‚£æ ·å…ˆåœ¨å­é¡¹ç›®ä¸­æäº¤æ‰èƒ½è¿›è¡Œè®°å½•ã€‚å…‹éš†ä¸Šå±‚ä»“åº“æ—¶ child ç›®å½•ä¹Ÿä¸å†ä¸ºç©ºã€‚ä½†åŒæ—¶ï¼Œchild ä¹Ÿä¸èƒ½å†æ‰§è¡Œç‹¬ç«‹çš„ Git å‘½ä»¤ï¼Œåªæœ‰ git subtree ç›¸å…³çš„æ“ä½œã€‚ è¿›è¡Œæ“ä½œå‰è¯·å…ˆå¤‡ä»½å·²æœ‰çš„nextä¸»é¢˜ç›®å½•ï¼Œæ ¹æ®ä¸åŒæƒ…å†µæ“ä½œä¸­å¯èƒ½éœ€è¦åˆ é™¤å¹¶ä¸”é‡æ–°cloneä¸‹æ¥ 1234567891011121314151617181920é¦–å…ˆåœ¨è‡ªå·±çš„githubä¸Šforkä¸€ä»½nextæºç git@github.com:Elietio/hexo-theme-next.git # ä¸ºhexoæ·»åŠ è¿œç¨‹ä»“åº“ # git remote add -f &lt;å­ä»“åº“å&gt; &lt;å­ä»“åº“åœ°å€&gt;$ git remote add -f next git@github.com:Elietio/hexo-theme-next.git# æ·»åŠ subtree# git subtree add --prefix=&lt;å­ç›®å½•å&gt; &lt;å­ä»“åº“å&gt; &lt;åˆ†æ”¯&gt; squashæ„æ€æ˜¯æŠŠsubtreeçš„æ”¹åŠ¨åˆå¹¶æˆä¸€æ¬¡commit$ git subtree add --prefix=themes/next next master --squash# æ›´æ–°å­é¡¹ç›®$ git fetch next master$ git subtree pull --prefix=themes/next next master --squashæ•´ä¸ªé¡¹ç›®çš„pullã€pushåŒæ ·ä¼šå¯¹å­é¡¹ç›®èµ·ä½œç”¨è€Œå¯¹nextå­é¡¹ç›®è¿›è¡Œpullã€pushæ“ä½œéœ€è¦ä½¿ç”¨subtree# git subtree push --prefix=&lt;å­ç›®å½•å&gt; &lt;è¿œç¨‹åˆ†æ”¯å&gt; åˆ†æ”¯$ git subtree push --prefix=themes/next next master # git subtree pull --prefix=&lt;å­ç›®å½•å&gt; &lt;è¿œç¨‹åˆ†æ”¯å&gt; åˆ†æ”¯$ git subtree pull --prefix=themes/yilia yilia master --squash å…¶å®ƒè®¾å¤‡åŒæ­¥ä¸Šé¢æ“ä½œå·²ç»æŠŠhexoçš„æºç›®å½•åŒæ­¥åˆ°Gitï¼Œå› æ­¤æˆ‘ä»¬åªéœ€è¦cloneï¼Œå¹¶ä¸”å®‰è£…node.jså’Œhexoç¯å¢ƒ 1234567$ git clone -b hexo git@github.com:Elietio/Elietio.github.io.git# å®‰è£… hexo$ npm install hexo(npm install hexo-cli -g)# å®‰è£…ä¾èµ–åº“$ npm install # å®‰è£…éƒ¨ç½²ç›¸å…³é…ç½®$ npm install hexo-deployer-git]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>hexo</tag>
        <tag>git</tag>
        <tag>subtree</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[linuxçš„awkå‘½ä»¤]]></title>
    <url>%2F2019%2F04%2F2019-04-10-shell-awk.html</url>
    <content type="text"><![CDATA[awkæ˜¯ä¸€ä¸ªå¼ºå¤§çš„æ–‡æœ¬åˆ†æå·¥å…·ï¼Œç›¸å¯¹äºgrepçš„æŸ¥æ‰¾ï¼Œsedçš„ç¼–è¾‘ï¼Œawkåœ¨å…¶å¯¹æ•°æ®åˆ†æå¹¶ç”ŸæˆæŠ¥å‘Šæ—¶ï¼Œæ˜¾å¾—å°¤ä¸ºå¼ºå¤§ã€‚ç®€å•æ¥è¯´awkå°±æ˜¯æŠŠæ–‡ä»¶é€è¡Œçš„è¯»å…¥ï¼Œä»¥ç©ºæ ¼ä¸ºé»˜è®¤åˆ†éš”ç¬¦å°†æ¯è¡Œåˆ‡ç‰‡ï¼Œåˆ‡å¼€çš„éƒ¨åˆ†å†è¿›è¡Œå„ç§åˆ†æå¤„ç†ã€‚awk å‘½ä»¤å’Œ sed å‘½ä»¤ç»“æ„ç›¸åŒï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œawk å°†æ¯ä¸ªè¾“å…¥è¡Œè§£é‡Šä¸ºä¸€æ¡è®°å½•è€Œæ¯ä¸€è¡Œä¸­çš„å†…å®¹ï¼ˆç”±ç©ºæ ¼æˆ–è€…åˆ¶è¡¨ç¬¦åˆ†éš”ï¼‰è§£é‡Šä¸ºæ¯ä¸€ä¸ªå­—æ®µï¼Œä¸€ä¸ªæˆ–è€…å¤šä¸ªè¿ç»­ç©ºæ ¼æˆ–è€…åˆ¶è¡¨ç¬¦çœ‹åšå®šç•Œç¬¦ã€‚awk ä¸­ $0 ä»£è¡¨æ•´ä¸ªè®°å½•ã€‚ linuxçš„awkå‘½ä»¤1awk ' /MA/ &#123; print $1 &#125;' list è§£é‡Šï¼šæ‰“å°åŒ…å« MA çš„è¡Œä¸­çš„ç¬¬ä¸€ä¸ªå•è¯ã€‚å†ä¸¾ä¸€ä¸ªå…·ä½“çš„ä¾‹å­ï¼Œæ¯”å¦‚ 1echo 'this is one world\nthat is another world' | awk '&#123;print $1&#125;' é‚£ä¹ˆè¾“å‡ºå°±æ˜¯ awk å¤„ç†ä¹‹åçš„æ¯ä¸€è¡Œç¬¬ä¸€ä¸ªå­—ç¬¦ä¹Ÿå°±æ˜¯ 12thisthat åŸºæœ¬æ ¼å¼awk å‘½ä»¤çš„åŸºæœ¬æ ¼å¼ 1awk [options] 'script' file options è¿™ä¸ªè¡¨ç¤ºä¸€äº›å¯é€‰çš„å‚æ•°é€‰é¡¹ï¼Œscript è¡¨ç¤º awk çš„å¯æ‰§è¡Œè„šæœ¬ä»£ç ï¼ˆä¸€èˆ¬è¢«{} èŠ±æ‹¬å·åŒ…å›´ï¼‰ï¼Œè¿™ä¸ªæ˜¯å¿…é¡»çš„ã€‚file è¿™ä¸ªè¡¨ç¤º awk éœ€è¦å¤„ç†çš„æ–‡ä»¶ï¼Œæ³¨æ„éœ€è¦æ˜¯çº¯æ–‡æœ¬æ–‡ä»¶ï¼ˆæ„å‘³ç€ awk èƒ½å¤Ÿå¤„ç†ï¼‰ã€‚ awk è‡ªå®šä¹‰åˆ†éš”ç¬¦ä¹‹å‰æåˆ°çš„awk é»˜è®¤çš„åˆ†å‰²ç¬¦ä¸ºç©ºæ ¼å’Œåˆ¶è¡¨ç¬¦ï¼Œawk ä¼šæ ¹æ®è¿™ä¸ªé»˜è®¤çš„åˆ†éš”ç¬¦å°†æ¯ä¸€è¡Œåˆ†ä¸ºè‹¥å¹²å­—æ®µï¼Œä¾æ¬¡ç”¨ $1, $2,$3 æ¥è¡¨ç¤ºï¼Œå¯ä»¥ä½¿ç”¨ -F å‚æ•°æ¥æŒ‡å®šåˆ†éš”ç¬¦ 1awk -F ':' '&#123;print $1&#125;' /etc/passwd è§£é‡Šï¼šä½¿ç”¨ -F æ¥æ”¹å˜åˆ†éš”ç¬¦ä¸º : ï¼Œæ¯”å¦‚ä¸Šé¢çš„å‘½ä»¤å°† /etc/passwd æ–‡ä»¶ä¸­çš„æ¯ä¸€è¡Œç”¨å†’å· : åˆ†å‰²æˆå¤šä¸ªå­—æ®µï¼Œç„¶åç”¨ print å°†ç¬¬ 1 åˆ—å­—æ®µçš„å†…å®¹æ‰“å°è¾“å‡º åœ¨ awk ä¸­åŒæ—¶æŒ‡å®šå¤šä¸ªåˆ†éš”ç¬¦ï¼Œæ¯”å¦‚ç°åœ¨æœ‰è¿™æ ·ä¸€ä¸ªæ–‡ä»¶ some.log æ–‡ä»¶å†…å®¹å¦‚ä¸‹ 12345Grape(100g)1980raisins(500g)1990plum(240g)1997apricot(180g)2005nectarine(200g)2008 ç°åœ¨æˆ‘ä»¬æƒ³å°†ä¸Šé¢çš„ some.log æ–‡ä»¶ä¸­æŒ‰ç…§ â€œæ°´æœåç§°ï¼ˆé‡é‡ï¼‰å¹´ä»½â€ æ¥è¿›è¡Œåˆ†å‰² 123456$ awk -F '[()]' '&#123;print $1, $2, $3&#125;' some.logGrape 100g 1980raisins 500g 1990plum 240g 1997apricot 180g 2005nectarine 200g 2008 åœ¨ -F å‚æ•°ä¸­ä½¿ç”¨ä¸€å¯¹æ–¹æ‹¬å·æ¥æŒ‡å®šå¤šä¸ªåˆ†éš”ç¬¦ï¼Œawk å¤„ç† some.log æ–‡ä»¶æ—¶å°±ä¼šä½¿ç”¨ â€œ(â€œ æˆ–è€… â€œ)â€ æ¥å¯¹æ–‡ä»¶çš„æ¯ä¸€è¡Œè¿›è¡Œåˆ†å‰²ã€‚ awk å†…ç½®å˜é‡çš„ä½¿ç”¨awk é™¤äº† $ å’Œæ•°å­—è¡¨ç¤ºå­—æ®µè¿˜æœ‰ä¸€äº›å…¶ä»–çš„å†…ç½®å˜é‡ï¼š $0 è¿™ä¸ªè¡¨ç¤ºæ–‡æœ¬å¤„ç†æ—¶çš„å½“å‰è¡Œï¼Œ$1 è¡¨ç¤ºæ–‡æœ¬è¡Œè¢«åˆ†éš”åçš„ç¬¬ 1 ä¸ªå­—æ®µåˆ—ï¼Œ$2 è¡¨ç¤ºæ–‡æœ¬è¡Œè¢«åˆ†å‰²åçš„ç¬¬ 2 ä¸ªå­—æ®µåˆ—ï¼Œ$3 è¡¨ç¤ºæ–‡æœ¬è¡Œè¢«åˆ†å‰²åçš„ç¬¬ 3 ä¸ªå­—æ®µåˆ—ï¼Œ$n è¡¨ç¤ºæ–‡æœ¬è¡Œè¢«åˆ†å‰²åçš„ç¬¬ n ä¸ªå­—æ®µåˆ— NR è¡¨ç¤ºæ–‡ä»¶ä¸­çš„è¡Œå·ï¼Œè¡¨ç¤ºå½“å‰æ˜¯ç¬¬å‡ è¡Œ NF è¡¨ç¤ºæ–‡ä»¶ä¸­çš„å½“å‰è¡Œè¢«åˆ†å‰²çš„åˆ—æ•°ï¼Œå¯ä»¥ç†è§£ä¸º MySQL æ•°æ®è¡¨é‡Œé¢æ¯ä¸€æ¡è®°å½•æœ‰å¤šå°‘ä¸ªå­—æ®µï¼Œæ‰€ä»¥ $NF å°±è¡¨ç¤ºæœ€åä¸€ä¸ªå­—æ®µï¼Œ$(NF-1) å°±è¡¨ç¤ºå€’æ•°ç¬¬äºŒä¸ªå­—æ®µ FS è¡¨ç¤º awk çš„è¾“å…¥åˆ†éš”ç¬¦ï¼Œé»˜è®¤åˆ†éš”ç¬¦ä¸ºç©ºæ ¼å’Œåˆ¶è¡¨ç¬¦ï¼Œå¯ä»¥å¯¹å…¶è¿›è¡Œè‡ªå®šä¹‰è®¾ç½® OFS è¡¨ç¤º awk çš„è¾“å‡ºåˆ†éš”ç¬¦ï¼Œé»˜è®¤ä¸ºç©ºæ ¼ï¼Œä¹Ÿå¯ä»¥å¯¹å…¶è¿›è¡Œè‡ªå®šä¹‰è®¾ç½® FILENAME è¡¨ç¤ºå½“å‰æ–‡ä»¶çš„æ–‡ä»¶åç§°ï¼Œå¦‚æœåŒæ—¶å¤„ç†å¤šä¸ªæ–‡ä»¶ï¼Œå®ƒä¹Ÿè¡¨ç¤ºå½“å‰æ–‡ä»¶åç§° RS è¡Œåˆ†éš”ç¬¦ï¼Œç”¨äºåˆ†å‰²è¡Œï¼Œé»˜è®¤ä¸ºæ¢è¡Œç¬¦ ORS è¾“å‡ºè®°å½•çš„åˆ†éš”ç¬¦ï¼Œé»˜è®¤ä¸ºæ¢è¡Œç¬¦ æ¯”å¦‚æˆ‘ä»¬æœ‰è¿™ä¹ˆä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ fruit.txt å†…å®¹å¦‚ä¸‹ï¼Œç”¨å®ƒæ¥æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ awk å‘½ä»¤å·¥å…· 12345678peach 100 Mar 1997 ChinaLemon 150 Jan 1986 AmericaPear 240 Mar 1990 Janpanavocado 120 Feb 2008 chinaawk '&#123;print $0&#125;' fruit.txt # è¡¨ç¤ºæ‰“å°è¾“å‡ºæ–‡ä»¶çš„æ¯ä¸€æ•´è¡Œçš„å†…å®¹awk '&#123;print $1&#125;' fruit.txt # è¡¨ç¤ºæ‰“å°è¾“å‡ºæ–‡ä»¶çš„æ¯ä¸€è¡Œçš„ç¬¬ 1 åˆ—å†…å®¹awk '&#123;print $1, $2&#125;' fruit.txt æ–‡ä»¶çš„æ¯ä¸€è¡Œçš„æ¯ä¸€åˆ—çš„å†…å®¹é™¤äº†å¯ä»¥ç”¨ print å‘½ä»¤æ‰“å°è¾“å‡ºä»¥å¤–ï¼Œè¿˜å¯ä»¥å¯¹å…¶è¿›è¡Œèµ‹å€¼ 1awk '&#123;$2 = "***"; print $0&#125;' fruit.txt ä¸Šé¢çš„ä¾‹å­å°±æ˜¯è¡¨ç¤ºé€šè¿‡å¯¹ $2 å˜é‡è¿›è¡Œé‡æ–°èµ‹å€¼ï¼Œæ¥éšè—æ¯ä¸€è¡Œçš„ç¬¬ 2 åˆ—å†…å®¹ï¼Œå¹¶ä¸”ç”¨æ˜Ÿå· * æ¥ä»£æ›¿å…¶è¾“å‡º åœ¨å‚æ•°åˆ—è¡¨ä¸­åŠ å…¥ä¸€äº›å­—ç¬¦ä¸²æˆ–è€…è½¬ä¹‰å­—ç¬¦ä¹‹ç±»çš„ä¸œä¸œ 1awk '&#123;print $1 "\t" $2 "\t" $3&#125;' fruit.txt åƒä¸Šé¢è¿™æ ·ï¼Œä½ å¯ä»¥åœ¨ print çš„å‚æ•°åˆ—è¡¨ä¸­åŠ å…¥ä¸€äº›å­—ç¬¦ä¸²æˆ–è€…è½¬ä¹‰å­—ç¬¦ä¹‹ç±»çš„ä¸œä¸œï¼Œè®©è¾“å‡ºçš„å†…å®¹æ ¼å¼æ›´æ¼‚äº®ï¼Œä½†ä¸€å®šè¦è®°ä½è¦ä½¿ç”¨åŒå¼•å·ã€‚ awk å†…ç½® NR å˜é‡è¡¨ç¤ºæ¯ä¸€è¡Œçš„è¡Œå· 123456awk '&#123;print NR "\t" $0&#125;' fruit.txt1 peach 100 Mar 1997 China2 Lemon 150 Jan 1986 America3 Pear 240 Mar 1990 Janpan4 avocado 120 Feb 2008 china awk å†…ç½® NF å˜é‡è¡¨ç¤ºæ¯ä¸€è¡Œçš„åˆ—æ•° 123456awk '&#123;print NF "\t" $0&#125;' fruit.txt5 peach 100 Mar 1997 China5 Lemon 150 Jan 1986 America5 Pear 240 Mar 1990 Janpan5 avocado 120 Feb 2008 china awk ä¸­ $NF å˜é‡çš„ä½¿ç”¨ awk &apos;{print $NF}&apos; fruit.txt ä¸Šé¢è¿™ä¸ª $NF å°±è¡¨ç¤ºæ¯ä¸€è¡Œçš„æœ€åä¸€åˆ—ï¼Œå› ä¸º NF è¡¨ç¤ºä¸€è¡Œçš„æ€»åˆ—æ•°ï¼Œåœ¨è¿™ä¸ªæ–‡ä»¶é‡Œè¡¨ç¤ºæœ‰ 5 åˆ—ï¼Œç„¶ååœ¨å…¶å‰é¢åŠ ä¸Š $ ç¬¦å·ï¼Œå°±å˜æˆäº† $5 ï¼Œè¡¨ç¤ºç¬¬ 5 åˆ— 123456awk '&#123;print $(NF - 1)&#125;' fruit.txt1997198619902008 ä¸Šé¢ $(NF-1) è¡¨ç¤ºå€’æ•°ç¬¬ 2 åˆ—ï¼Œ $(NF-2) è¡¨ç¤ºå€’æ•°ç¬¬ 3 åˆ—ï¼Œä¾æ¬¡ç±»æ¨ã€‚ 1234567awk 'NR % 6' # æ‰“å°å‡ºäº† 6 å€æ•°è¡Œä¹‹å¤–çš„å…¶ä»–è¡Œawk 'NR &gt; 5' # æ‰“å°ç¬¬ 5 è¡Œä¹‹åå†…å®¹ï¼Œç±»ä¼¼ `tail -n +6` æˆ–è€… `sed '1,5d'`awk 'NF &gt;= 6' # æ‰“å°å¤§äºç­‰äº 6 åˆ—çš„è¡Œawk '/foo/ &amp;&amp; /bar/' # æ‰“å°åŒ¹é… `/foo/` å’Œ `/bar/` çš„è¡Œawk '/foo/ &amp;&amp; !/bar/' # æ‰“å°åŒ…å« `/foo/` ä¸åŒ…å« `/bar/` çš„è¡Œawk '/foo/ || /bar/' # æˆ–awk '/foo/,/bar/' # æ‰“å°ä»åŒ¹é… `/foo/` å¼€å§‹çš„è¡Œåˆ° `/bar/` çš„è¡Œï¼ŒåŒ…å«è¿™ä¸¤è¡Œ awk å†…ç½®å‡½æ•°awk è¿˜æä¾›äº†ä¸€äº›å†…ç½®å‡½æ•°ï¼Œæ¯”å¦‚ toupper() ç”¨äºå°†å­—ç¬¦è½¬ä¸ºå¤§å†™ tolower() å°†å­—ç¬¦è½¬ä¸ºå°å†™ length() é•¿åº¦ substr() å­å­—ç¬¦ä¸² sin() æ­£å¼¦ cos() ä½™å¼¦ sqrt() å¹³æ–¹æ ¹ rand() éšæœºæ•° æ›´å¤šçš„æ–¹æ³•å¯ä»¥å‚è€ƒ man awk awk åŒæ—¶å¤„ç†å¤šä¸ªæ–‡ä»¶1awk '&#123;print FILENAME "\t" $0&#125;' demo1.txt demo2.txt å½“ä½ ä½¿ç”¨ awk åŒæ—¶å¤„ç†å¤šä¸ªæ–‡ä»¶çš„æ—¶å€™ï¼Œå®ƒä¼šå°†å¤šä¸ªæ–‡ä»¶åˆå¹¶å¤„ç†ï¼Œå˜é‡FILENAME å°±è¡¨ç¤ºå½“å‰æ–‡æœ¬è¡Œæ‰€åœ¨çš„æ–‡ä»¶åç§°ã€‚ BEGIN å…³é”®å­—çš„ä½¿ç”¨åœ¨è„šæœ¬ä»£ç æ®µå‰é¢ä½¿ç”¨ BEGIN å…³é”®å­—æ—¶ï¼Œå®ƒä¼šåœ¨å¼€å§‹è¯»å–ä¸€ä¸ªæ–‡ä»¶ä¹‹å‰ï¼Œè¿è¡Œä¸€æ¬¡ BEGINå…³é”®å­—åé¢çš„è„šæœ¬ä»£ç æ®µï¼Œ BEGIN åé¢çš„è„šæœ¬ä»£ç æ®µåªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œæ‰§è¡Œå®Œä¹‹å awk ç¨‹åºå°±ä¼šé€€å‡º 1awk 'BEGIN &#123;print "Start read file"&#125;' /etc/passwd awk è„šæœ¬ä¸­å¯ä»¥ç”¨å¤šä¸ªèŠ±æ‹¬å·æ¥æ‰§è¡Œå¤šä¸ªè„šæœ¬ä»£ç ï¼Œå°±åƒä¸‹é¢è¿™æ · 1awk 'BEGIN &#123;print "Start read file"&#125; &#123;print $0&#125;' /etc/passwd END å…³é”®å­—ä½¿ç”¨æ–¹æ³•awk çš„ END æŒ‡ä»¤å’Œ BEGIN æ°å¥½ç›¸åï¼Œåœ¨ awk è¯»å–å¹¶ä¸”å¤„ç†å®Œæ–‡ä»¶çš„æ‰€æœ‰å†…å®¹è¡Œä¹‹åï¼Œæ‰ä¼šæ‰§è¡ŒENDåé¢çš„è„šæœ¬ä»£ç æ®µ awk &apos;END {print &quot;End file&quot;}&apos; /etc/passwd awk &apos;BEGIN {print &quot;Start read file&quot;} {print $0} END {print &quot;End file&quot;}&apos; /etc/passwd åœ¨ awk ä¸­ä½¿ç”¨å˜é‡å¯ä»¥åœ¨ awk è„šæœ¬ä¸­å£°æ˜å’Œä½¿ç”¨å˜é‡ 1awk '&#123;msg="hello world"; print msg&#125;' /etc/passwd awk å£°æ˜çš„å˜é‡å¯ä»¥åœ¨ä»»ä½•å¤šä¸ªèŠ±æ‹¬å·è„šæœ¬ä¸­ä½¿ç”¨ 1awk 'BEGIN &#123;msg="hello world"&#125; &#123;print msg&#125;' /etc/passwd åœ¨ awk ä¸­ä½¿ç”¨æ•°å­¦è¿ç®—ï¼Œåœ¨ awk ä¸­ï¼Œåƒå…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸€æ ·ï¼Œå®ƒä¹Ÿæ”¯æŒä¸€äº›åŸºæœ¬çš„æ•°å­¦è¿ç®—æ“ä½œ 1awk '&#123;a = 12; b = 24; print a + b&#125;' company.txt ä¸Šé¢è¿™æ®µè„šæœ¬è¡¨ç¤ºï¼Œå…ˆå£°æ˜ä¸¤ä¸ªå˜é‡ a = 12 å’Œ b = 24ï¼Œç„¶åç”¨ print æ‰“å°å‡º a åŠ ä¸Š b çš„ç»“æœã€‚ è¯·è®°ä½ awk æ˜¯é’ˆå¯¹æ–‡ä»¶çš„æ¯ä¸€è¡Œæ¥æ‰§è¡Œä¸€æ¬¡å•å¼•å· é‡Œé¢çš„è„šæœ¬ä»£ç ï¼Œæ¯è¯»å–åˆ°ä¸€è¡Œå°±ä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œæ–‡ä»¶é‡Œé¢æœ‰å¤šå°‘è¡Œå°±ä¼šæ‰§è¡Œå¤šå°‘æ¬¡ï¼Œä½† BEGIN å’Œ END å…³é”®å­—åè„šæœ¬ä»£ç é™¤å¤–ï¼Œå¦‚æœè¢«å¤„ç†çš„æ–‡ä»¶ä¸­ä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œé‚£ awk å°±ä¸€æ¬¡éƒ½ä¸ä¼šæ‰§è¡Œã€‚ awk è¿˜æ”¯æŒå…¶ä»–çš„æ•°å­¦è¿ç®—ç¬¦ 12345+ åŠ æ³•è¿ç®—ç¬¦- å‡æ³•è¿ç®—ç¬¦* ä¹˜æ³•è¿ç®—ç¬¦/ é™¤æ³•è¿ç®—ç¬¦% å–ä½™è¿ç®—ç¬¦ åœ¨ awk ä¸­ä½¿ç”¨æ¡ä»¶åˆ¤æ–­ æ¯”å¦‚æœ‰ä¸€ä¸ªæ–‡ä»¶ company.txt å†…å®¹å¦‚ä¸‹ yahoo 100 4500 google 150 7500 apple 180 8000 twitter 120 5000 å¦‚æœè¦åˆ¤æ–­æ–‡ä»¶çš„ç¬¬ 3 åˆ—æ•°æ®ï¼Œä¹Ÿå°±æ˜¯å¹³å‡å·¥èµ„å°äº 5500 çš„å…¬å¸ï¼Œç„¶åå°†å…¶æ‰“å°è¾“å‡º 1awk '$3 &lt; 5500 &#123;print $0&#125;' company.txt ä¸Šé¢çš„å‘½ä»¤ç»“æœå°±æ˜¯å¹³å‡å·¥èµ„å°äº 5500 çš„å…¬å¸åå•ï¼Œ$3 &lt; 5500 è¡¨ç¤ºå½“ç¬¬ 3 åˆ—å­—æ®µçš„å†…å®¹å°äº 5500 çš„æ—¶å€™æ‰ä¼šæ‰§è¡Œåé¢çš„ {print $0} ä»£ç å— 1awk '$1 == "yahoo" &#123;print $0&#125;' company.txt awk è¿˜æœ‰ä¸€äº›å…¶ä»–çš„æ¡ä»¶æ“ä½œç¬¦å¦‚ä¸‹ è¿ç®—ç¬¦ æè¿° &lt; å°äº &lt;= å°äºæˆ–ç­‰äº == ç­‰äº != ä¸ç­‰äº &gt; å¤§äº &gt;= å¤§äºæˆ–ç­‰äº ~ åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼ !~ ä¸åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼ ä½¿ç”¨ if æŒ‡ä»¤åˆ¤æ–­æ¥å®ç°ä¸Šé¢åŒæ ·çš„æ•ˆæœ 1awk '&#123;if ($3 &lt; 5500) print $0&#125;' company.txt ä¸Šé¢è¡¨ç¤ºå¦‚æœç¬¬ 3 åˆ—å­—æ®µå°äº 5500 çš„æ—¶å€™å°±ä¼šæ‰§è¡Œåé¢çš„ print $0 åœ¨ awk ä¸­ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¯”å¦‚ç°åœ¨æˆ‘ä»¬æœ‰è¿™ä¹ˆä¸€ä¸ªæ–‡ä»¶ poetry.txt å†…å®¹å¦‚ä¸‹ï¼š 1234This above all: to thine self be trueThere is nothing either good or bad, but thinking makes it soThereâ€™s a special providence in the fall of a sparrowNo matter how dark long, may eventually in the day arrival ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…å­—ç¬¦ä¸² â€œThereâ€ ï¼Œå°†åŒ…å«è¿™ä¸ªå­—ç¬¦ä¸²çš„è¡Œæ‰“å°å¹¶è¾“å‡º 1234awk '/There/&#123;print $0&#125;' poetry.txtThere is nothing either good or bad, but thinking makes it soThereâ€™s a special providence in the fall of a sparrow ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼é…ä¸€ä¸ªåŒ…å«å­—æ¯ t å’Œå­—æ¯ e ï¼Œå¹¶ä¸” t å’Œ e ä¸­é—´åªèƒ½æœ‰ä»»æ„å•ä¸ªå­—ç¬¦çš„è¡Œ 12345awk '/t.e/&#123;print $0&#125;' poetry.txtThere is nothing either good or bad, but thinking makes it soThereâ€™s a special providence in the fall of a sparrowNo matter how dark long, may eventually in the day arrival å¦‚æœåªæƒ³åŒ¹é…å•çº¯çš„å­—ç¬¦ä¸² â€œt.eâ€ï¼Œ é‚£æ­£åˆ™è¡¨è¾¾å¼å°±æ˜¯è¿™æ ·çš„ /t.e/ ï¼Œç”¨åæ–œæ æ¥è½¬ä¹‰ . ç¬¦å· å› ä¸º . åœ¨æ­£åˆ™è¡¨è¾¾å¼é‡Œé¢è¡¨ç¤ºä»»æ„å•ä¸ªå­—ç¬¦ã€‚ ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥åŒ¹é…æ‰€æœ‰ä»¥ â€œTheâ€ å­—ç¬¦ä¸²å¼€å¤´çš„è¡Œ 1awk '/^The/&#123;print $0&#125;' poetry.txt åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ ^è¡¨ç¤ºä»¥æŸæŸå­—ç¬¦æˆ–è€…å­—ç¬¦ä¸²å¼€å¤´ã€‚ ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥åŒ¹é…æ‰€æœ‰ä»¥ â€œtrueâ€ å­—ç¬¦ä¸²ç»“å°¾çš„è¡Œ 1awk '/true$/&#123;print $0&#125;' poetry.txt åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ $ è¡¨ç¤ºä»¥æŸæŸå­—ç¬¦æˆ–è€…å­—ç¬¦ä¸²ç»“å°¾ã€‚ 123awk '/m[a]t/&#123;print $0&#125;' poetry.txtNo matter how dark long, may eventually in the day arrival ä¸Šé¢è¿™ä¸ªæ­£åˆ™è¡¨è¾¾å¼ /m[a]t/ è¡¨ç¤ºåŒ¹é…åŒ…å«å­—ç¬¦ m ï¼Œç„¶åæ¥ç€åé¢åŒ…å«ä¸­é—´æ–¹æ‹¬å·ä¸­è¡¨ç¤ºçš„å•ä¸ªå­—ç¬¦ a ï¼Œæœ€ååŒ…å«å­—ç¬¦ t çš„è¡Œï¼Œè¾“å‡ºç»“æœä¸­åªæœ‰å•è¯ â€œmatterâ€ ç¬¦åˆè¿™ä¸ªæ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…ã€‚å› ä¸ºæ­£åˆ™è¡¨è¾¾å¼ [a] æ–¹æ‹¬å·ä¸­è¡¨ç¤ºåŒ¹é…é‡Œé¢çš„ä»»æ„å•ä¸ªå­—ç¬¦ã€‚ ç»§ç»­ä¸Šé¢çš„ä¸€ä¸ªæ–°ä¾‹å­å¦‚ä¸‹ 1awk '/^Th[ie]/&#123;print $0&#125;' poetry.txt è¿™ä¸ªä¾‹å­ä¸­çš„æ­£åˆ™è¡¨è¾¾å¼ /^Th[ie]/ è¡¨ç¤ºåŒ¹é…ä»¥å­—ç¬¦ä¸² â€œThiâ€ æˆ–è€… â€œTheâ€ å¼€å¤´çš„è¡Œï¼Œæ­£åˆ™è¡¨è¾¾å¼æ–¹æ‹¬å·ä¸­è¡¨ç¤ºåŒ¹é…å…¶ä¸­çš„ä»»æ„å•ä¸ªå­—ç¬¦ã€‚ å†ç»§ç»­ä¸Šé¢çš„æ–°çš„ç”¨æ³• 1awk '/s[a-z]/&#123;print $0&#125;' poetry.txt æ­£åˆ™è¡¨è¾¾å¼ /s[a-z]/ è¡¨ç¤ºåŒ¹é…åŒ…å«å­—ç¬¦ s ç„¶ååé¢è·Ÿç€ä»»æ„ a åˆ° z ä¹‹é—´çš„å•ä¸ªå­—ç¬¦çš„å­—ç¬¦ä¸²ï¼Œæ¯”å¦‚ â€œseâ€, â€œsoâ€, â€œspâ€ ç­‰ç­‰ã€‚ æ­£åˆ™è¡¨è¾¾å¼ [] æ–¹æ‹¬å·ä¸­è¿˜æœ‰ä¸€äº›å…¶ä»–ç”¨æ³•æ¯”å¦‚ä¸‹é¢è¿™äº› [a-zA-Z] è¡¨ç¤ºåŒ¹é…å°å†™çš„ a åˆ° z ä¹‹é—´çš„å•ä¸ªå­—ç¬¦ï¼Œæˆ–è€…å¤§å†™çš„ A åˆ° Z ä¹‹é—´çš„å•ä¸ªå­—ç¬¦ [^a-z] ç¬¦å· `^` åœ¨æ–¹æ‹¬å·é‡Œé¢è¡¨ç¤ºå–åï¼Œä¹Ÿå°±æ˜¯éçš„æ„æ€ï¼Œè¡¨ç¤ºåŒ¹é…ä»»ä½•é a åˆ° z ä¹‹é—´çš„å•ä¸ªå­—ç¬¦ æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„æ˜Ÿå· * å’ŒåŠ å· + çš„ä½¿ç”¨æ–¹æ³•ï¼Œ* è¡¨ç¤ºåŒ¹é…æ˜Ÿå·å‰å­—ç¬¦ä¸² 0 æ¬¡æˆ–è€…å¤šæ¬¡ï¼Œ+ å’Œæ˜Ÿå·åŸç†å·®ä¸å¤šï¼Œåªæ˜¯åŠ å·è¡¨ç¤ºä»»æ„ 1 ä¸ªæˆ–è€… 1 ä¸ªä»¥ä¸Šï¼Œä¹Ÿå°±æ˜¯å¿…é¡»è‡³å°‘è¦å‡ºç°ä¸€æ¬¡ã€‚ æ­£åˆ™è¡¨è¾¾å¼é—®å· ? çš„ä½¿ç”¨æ–¹æ³•ï¼Œæ­£åˆ™ä¸­çš„é—®å· ? è¡¨ç¤ºå®ƒå‰é¢çš„å­—ç¬¦åªèƒ½å‡ºç° 0 æ¬¡ æˆ–è€… 1 æ¬¡ã€‚ æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„ {} èŠ±æ‹¬å·ç”¨æ³•ï¼ŒèŠ±æ‹¬å· {} è¡¨ç¤ºè§„å®šå®ƒå‰é¢çš„å­—ç¬¦å¿…é¡»å‡ºç°çš„æ¬¡æ•°ï¼Œåƒè¿™ä¸ª /go{2}d/ å°±è¡¨ç¤ºåªåŒ¹é…å­—ç¬¦ä¸² â€œgoodâ€ï¼Œä¹Ÿå°±æ˜¯ä¸­é—´çš„å­—æ¯ â€œoâ€ å¿…é¡»è¦å‡ºç° 2 æ¬¡ã€‚ æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„èŠ±æ‹¬å·è¿˜æœ‰ä¸€äº›å…¶ä»–çš„ç”¨æ³•å¦‚ä¸‹ /go{2,10}d/ è¡¨ç¤ºå­—æ¯ &quot;o&quot; åªèƒ½å¯ä»¥å‡ºç° 2 æ¬¡ï¼Œ3 æ¬¡ï¼Œ4 æ¬¡ï¼Œ5 æ¬¡ï¼Œ6 æ¬¡ ... ä¸€ç›´åˆ° 10 æ¬¡ /go{2,}d/ è¡¨ç¤ºå­—æ¯ &quot;o&quot; å¿…é¡»è‡³å°‘å‡ºç° 2 æ¬¡æˆ–ç€ 2 æ¬¡ä»¥ä¸Š æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„åœ†æ‹¬å·è¡¨ç¤ºå°†å¤šä¸ªå­—ç¬¦å½“æˆä¸€ä¸ªå®Œæ•´çš„å¯¹è±¡æ¥çœ‹å¾…ã€‚æ¯”å¦‚ /th(in){1}king/ å°±è¡¨ç¤ºå…¶ä¸­å­—ç¬¦ä¸² â€œinâ€ å¿…é¡»å‡ºç° 1 æ¬¡ã€‚è€Œå¦‚æœä¸åŠ åœ†æ‹¬å·å°±å˜æˆäº† /thin{1}king/ è¿™ä¸ªå°±è¡¨ç¤ºå…¶ä¸­å­—ç¬¦ â€œnâ€ å¿…é¡»å‡ºç° 1 æ¬¡ã€‚ ä¸€äº›ç»„åˆä½¿ç”¨ä½¿ç”¨ awk è¿‡æ»¤ history è¾“å‡ºï¼Œæ‰¾åˆ°æœ€å¸¸ç”¨çš„å‘½ä»¤1history | awk '&#123;a[$2]++&#125;END&#123;for(i in a)&#123;print a[i] " " i&#125;&#125;' | sort -rn | head è¿‡æ»¤æ–‡ä»¶ä¸­é‡å¤è¡Œ1awk '!x[$0]++' &lt;file&gt; å°†ä¸€è¡Œé•¿åº¦è¶…è¿‡ 72 å­—ç¬¦çš„è¡Œæ‰“å°1awk 'length&gt;72' file æŸ¥çœ‹æœ€è¿‘å“ªäº›ç”¨æˆ·ä½¿ç”¨ç³»ç»Ÿ1last | grep -v "^$" | awk '&#123; print $1 &#125;' | sort -nr | uniq -c å‡è®¾æœ‰ä¸€ä¸ªæ–‡æœ¬ï¼Œæ¯ä¸€è¡Œéƒ½æ˜¯ä¸€ä¸ª int æ•°å€¼ï¼Œæƒ³è¦è®¡ç®—è¿™ä¸ªæ–‡ä»¶æ¯ä¸€è¡Œçš„å’Œï¼Œå¯ä»¥ä½¿ç”¨1awk '&#123;s+=$1&#125; ENG &#123;printf "%.0f", s&#125;' /path/to/file reference http://www.ruanyifeng.com/blog/2018/11/awk.html]]></content>
      <categories>
        <category>linux</category>
        <category>shell</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>shell</tag>
        <tag>awk</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¯¹äºå«æœ‰æ³›å‹çš„ç±»,å¦‚ä½•åœ¨ç±»ä¸­è·å–æ³›å‹çš„classå¯¹è±¡ï¼Ÿ]]></title>
    <url>%2F2018%2F05%2Fjava-generics.html</url>
    <content type="text"><![CDATA[å¯¹äºå«æœ‰æ³›å‹çš„ç±»,å¦‚ä½•åœ¨ç±»ä¸­è·å–æ³›å‹çš„classå¯¹è±¡ï¼Ÿ å¦‚æœå­ç±»ç»§æ‰¿è¯¥ç±»çš„æ—¶å€™ä¼ é€’äº†æ³›å‹ï¼Œæ‰€ä»¥ç¼–è¯‘æœŸè¯¥ç±»çš„æ³›å‹å…¶å®å·²ç»æŒ‡å®šäº†ã€‚é‚£ä¹ˆåœ¨ç±»ä¸­å®šä¹‰ä¸€ä¸ªClasså¯¹è±¡ï¼Œç„¶åé€šè¿‡æ„é€ ä»£ç å—ï¼ŒthisæŒ‡å‘çš„æ˜¯å½“å‰è°ƒç”¨çš„å­ç±» 123456private Class&lt;T&gt; clazz;&#123; // è·å–å½“å‰ç±»ä¸Šçš„æ³›å‹(thisæŒ‡å‘å½“å‰å­ç±») ParameterizedType type =(ParameterizedType)this.getClass().getGenericSuperclass(); clazz = (Class&lt;T&gt;) type.getActualTypeArguments()[0]; &#125; å¯¹äºæ²¡æœ‰ç»§æ‰¿è¯¥ç±»çš„å­ç±»ï¼Œå¯ä»¥é‡‡ç”¨newçš„æ—¶å€™æœ‰å‚æ„é€ å‡½æ•°ä¼ é€’ 123456private Class&lt;T&gt; clazz;//é€šè¿‡æ„é€ å‡½æ•°æŒ‡å®šå…ƒç´ ç±»å‹public classname(Class&lt;T&gt; clazz) &#123; super(); this.clazz = clazz; &#125;]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HashMapæ¢ç©¶ä»¥åŠConcurrentHashMap]]></title>
    <url>%2F2017%2F11%2Fhashmap-concurrenthashmap.html</url>
    <content type="text"><![CDATA[HashMapæ˜¯ä¸€ç§ç»“æ„éå¸¸å·§å¦™çš„é›†åˆå®¹å™¨ã€‚HashMapæ˜¯å­˜å‚¨é”®å€¼å¯¹çš„ç»“æ„ï¼Œkeyå’Œvalueä¸€ä¸€å¯¹åº”ï¼Œkeyå¿…é¡»ä¿è¯å”¯ä¸€ï¼Œå­˜å‚¨æ— åºï¼Œçº¿ç¨‹ä¸å®‰å…¨ï¼Œè¿™æ˜¯å®ƒçš„ä¸€äº›åŸºæœ¬ç‰¹ç‚¹ã€‚åœ¨javaä¸­ï¼Œæœ€åŸºæœ¬çš„ç»“æ„å°±æ˜¯ä¸¤ç§ï¼Œä¸€ä¸ªæ˜¯æ•°ç»„ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯æ¨¡æ‹ŸæŒ‡é’ˆï¼ˆå¼•ç”¨ï¼‰ï¼Œæ‰€æœ‰çš„æ•°æ®ç»“æ„éƒ½å¯ä»¥ç”¨è¿™ä¸¤ä¸ªåŸºæœ¬ç»“æ„æ¥æ„é€ çš„ï¼Œhashmapä¹Ÿä¸ä¾‹å¤–ã€‚ Hashmapå®é™…ä¸Šæ˜¯ä¸€ä¸ªæ•°ç»„å’Œé“¾è¡¨çš„ç»“åˆä½“ï¼ˆåœ¨æ•°æ®ç»“æ„ä¸­ï¼Œä¸€èˆ¬ç§°ä¹‹ä¸ºâ€œé“¾è¡¨æ•£åˆ—â€œï¼‰ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º å½“æ–°å»ºä¸€ä¸ªHashMapçš„æ—¶å€™ï¼Œä¼šåˆå§‹åŒ–ä¸€ä¸ªæ•°ç»„ã€‚ 123456789//The table, resized as necessary. Length MUST Always be a power of two. //FIXME è¿™é‡Œéœ€è¦æ³¨æ„è¿™å¥è¯ï¼Œè‡³äºåŸå› åé¢ä¼šè®²åˆ° transient Entry[ ] table; static class Entry&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; &#123; final K key; V value; final int hash; Entry&lt;K,V&gt; next; &#125; Entry&lt;K,V&gt;å°±æ˜¯å­˜å‚¨åœ¨æ•°ç»„ä¸­çš„å…ƒç´ ï¼Œå®ƒåŒ…å«äº†ä¸€ä¸ªæŒ‡å‘ä¸‹ä¸ªå…ƒç´ çš„å¼•ç”¨ï¼Œæ„æˆäº†ä¸€ä¸ªå•å‘é“¾è¡¨ã€‚ å½“æˆ‘ä»¬å¾€hashmapä¸­putå…ƒç´ çš„æ—¶å€™ï¼Œå…ˆæ ¹æ®keyçš„hashå€¼å¾—åˆ°è¿™ä¸ªå…ƒç´ åœ¨æ•°ç»„ä¸­çš„ä½ç½®ï¼ˆå³ä¸‹æ ‡ï¼‰ï¼Œç„¶åå°±å¯ä»¥æŠŠè¿™ä¸ªå…ƒç´ æ”¾åˆ°å¯¹åº”çš„ä½ç½®ä¸­äº†ã€‚å¦‚æœè¿™ä¸ªå…ƒç´ æ‰€åœ¨çš„ä½å­ä¸Šå·²ç»å­˜æ”¾æœ‰å…¶ä»–å…ƒç´ äº†ï¼Œæ ¹æ®equalsæ–¹æ³•è¿›è¡Œæ¯”è¾ƒï¼Œæœ‰ç›¸ç­‰çš„åˆ™è¦†ç›–æ‰ï¼Œæ²¡æœ‰ç›¸å½“çš„é‚£ä¹ˆå°†ä»¥é“¾è¡¨çš„å½¢å¼å­˜æ”¾ï¼Œæ–°åŠ å…¥çš„æ”¾åœ¨é“¾å¤´ï¼Œæœ€å…ˆåŠ å…¥çš„æ”¾åœ¨é“¾å°¾ã€‚ä»hashmapä¸­getå…ƒç´ æ—¶ï¼Œé¦–å…ˆè®¡ç®—keyçš„hashcodeï¼Œæ‰¾åˆ°æ•°ç»„ä¸­å¯¹åº”ä½ç½®çš„æŸä¸€å…ƒç´ ï¼Œç„¶åé€šè¿‡keyçš„equalsæ–¹æ³•åœ¨å¯¹åº”ä½ç½®çš„é“¾è¡¨ä¸­æ‰¾åˆ°éœ€è¦çš„å…ƒç´ ã€‚ 1.Hashç®—æ³•æˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨hashmapä¸­è¦æ‰¾åˆ°æŸä¸ªå…ƒç´ ï¼Œéœ€è¦æ ¹æ®keyçš„hashå€¼æ¥æ±‚å¾—å¯¹åº”æ•°ç»„ä¸­çš„ä½ç½®ã€‚å¦‚ä½•è®¡ç®—è¿™ä¸ªä½ç½®å°±æ˜¯hashç®—æ³•ã€‚å‰é¢è¯´è¿‡hashmapçš„æ•°æ®ç»“æ„æ˜¯æ•°ç»„å’Œé“¾è¡¨çš„ç»“åˆï¼Œæ‰€ä»¥å¦‚æœhashmapé‡Œé¢çš„å…ƒç´ ä½ç½®å°½é‡çš„åˆ†å¸ƒå‡åŒ€äº›ï¼Œå°½é‡ä½¿å¾—æ¯ä¸ªä½ç½®ä¸Šçš„å…ƒç´ æ•°é‡åªæœ‰ä¸€ä¸ªï¼Œé‚£ä¹ˆæŸ¥æ‰¾çš„æ—¶å€™æ— éœ€éå†é“¾è¡¨ï¼Œé€Ÿåº¦å°±ä¼šå¾ˆå¿«ã€‚Javaä¸­æ˜¯è¿™æ ·å®ç°çš„ 123static int indexFor(int h, int length) &#123; return h &amp; (length-1); &#125; é¦–å…ˆç®—å¾—keyå¾—hashcodeå€¼ï¼Œç„¶åè·Ÿæ•°ç»„çš„é•¿åº¦-1åšä¸€æ¬¡â€œä¸â€è¿ç®—ï¼ˆ&amp;ï¼‰ã€‚HashMapé»˜è®¤çš„åˆå§‹åŒ–æ•°ç»„é•¿åº¦æ˜¯16ï¼Œå¹¶ä¸”æ— è®ºåˆ›å»ºå¤šå¤§çš„HashMapï¼Œå®ƒçš„æ•°ç»„é•¿åº¦éƒ½æ˜¯2çš„næ¬¡æ–¹ï¼Œè¿™æ˜¯ä¸ºä½•å‘¢ï¼Ÿ çœ‹ä¸‹å›¾ï¼Œå·¦è¾¹ä¸¤ç»„æ˜¯æ•°ç»„é•¿åº¦ä¸º16ï¼ˆ2çš„4æ¬¡æ–¹ï¼‰ï¼Œå³è¾¹ä¸¤ç»„æ˜¯æ•°ç»„é•¿åº¦ä¸º15ã€‚ä¸¤ç»„çš„hashcodeå‡ä¸º8å’Œ9ï¼Œä½†æ˜¯å¾ˆæ˜æ˜¾ï¼Œå½“å®ƒä»¬å’Œ1110â€œä¸â€çš„æ—¶å€™ï¼Œäº§ç”Ÿäº†ç›¸åŒçš„ç»“æœï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒä»¬ä¼šå®šä½åˆ°æ•°ç»„ä¸­çš„åŒä¸€ä¸ªä½ç½®ä¸Šå»ï¼Œè¿™å°±äº§ç”Ÿäº†ç¢°æ’ï¼Œ8å’Œ9ä¼šè¢«æ”¾åˆ°åŒä¸€ä¸ªé“¾è¡¨ä¸Šï¼Œé‚£ä¹ˆæŸ¥è¯¢çš„æ—¶å€™å°±éœ€è¦éå†è¿™ä¸ªé“¾è¡¨ï¼Œå¾—åˆ°8æˆ–è€…9ï¼Œè¿™æ ·å°±é™ä½äº†æŸ¥è¯¢çš„æ•ˆç‡ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å‘ç°ï¼Œå½“æ•°ç»„é•¿åº¦ä¸º15çš„æ—¶å€™ï¼Œhashcodeçš„å€¼ä¼šä¸14ï¼ˆ1110ï¼‰è¿›è¡Œâ€œä¸â€ï¼Œé‚£ä¹ˆæœ€åä¸€ä½æ°¸è¿œæ˜¯0ï¼Œè€Œ0001ï¼Œ0011ï¼Œ0101ï¼Œ1001ï¼Œ1011ï¼Œ0111ï¼Œ1101è¿™å‡ ä¸ªä½ç½®æ°¸è¿œéƒ½ä¸èƒ½å­˜æ”¾å…ƒç´ äº†ï¼Œç©ºé—´æµªè´¹ç›¸å½“å¤§ï¼Œæ›´ç³Ÿçš„æ˜¯è¿™ç§æƒ…å†µä¸­ï¼Œæ•°ç»„å¯ä»¥ä½¿ç”¨çš„ä½ç½®æ¯”æ•°ç»„é•¿åº¦å°äº†å¾ˆå¤šï¼Œè¿™æ„å‘³ç€è¿›ä¸€æ­¥å¢åŠ äº†ç¢°æ’çš„å‡ ç‡ï¼Œå‡æ…¢äº†æŸ¥è¯¢çš„æ•ˆç‡ï¼ å› æ­¤ï¼Œå½“æ•°ç»„çš„é•¿åº¦ä¸º2çš„næ¬¡æ–¹çš„æ—¶å€™ï¼Œèƒ½å¤Ÿå°½é‡ä¿è¯å…ƒç´ åˆ†å¸ƒå‡åŒ€ã€‚é‚£ä¹ˆæˆ‘ä»¬æƒ³è¦å­˜æ”¾1000ä¸ªå…ƒç´ ï¼Œnew HashMap(1000),javaä¼šè‡ªåŠ¨å°†HashMapçš„æ•°ç»„é•¿åº¦è®¾ä¸º1024ï¼Œè¿™æ ·åˆ°åº•åˆé€‚å—ï¼Ÿå®é™…ä¸Šå¹¶ä¸åˆé€‚ï¼ŒHashMapä¸­è¿˜æœ‰ä¸€ä¸ªè£…è½½å› å­LoadFactorã€‚ HashMapçš„æ‰©å®¹HashMapå«æœ‰ä¸€ä¸ªé˜ˆå€¼ï¼Œå½“è¾¾åˆ°è¿™ä¸ªé˜ˆå€¼ï¼ŒHashMapå°±ä¼šæ‰©å®¹ï¼Œé‡æ–°è®¡ç®—æ¯ä¸€ä¸ªå…ƒç´ çš„Hashï¼Œæ”¾åˆ°æ–°çš„ä½ç½®ï¼Œé»˜è®¤æ‰©å®¹ä¸€å€ã€‚æ‰©å®¹ä¹Ÿæ˜¯ä¸ºäº†å‡å°‘å…ƒç´ ç¢°æ’çš„æœºç‡ï¼Œé˜ˆå€¼=æ•°ç»„é•¿åº¦xLoadFactorï¼Œé»˜è®¤LoadFactorä¸º0.75ã€‚å› æ­¤ï¼Œå›åˆ°ä¸Šé¢ï¼Œå½“æˆ‘ä»¬æƒ³è¦å­˜å‚¨1000ä¸ªå…ƒç´ çš„æ—¶å€™ï¼Œå¦‚æœè®¾ç½®HashMapå¤§å°ä¸º1024ï¼Œé‚£ä¹ˆé˜ˆå€¼ä¸º1024x0.75=768ï¼Œå³è¶…è¿‡768å°±ä¼šå‘ç”Ÿæ‰©å®¹ï¼Œä¼šå°†æ•°ç»„é•¿åº¦æ‰©å¤§åˆ°2048ï¼Œç„¶åé‡æ–°è®¡ç®—æ¯ä¸ªå…ƒç´ åœ¨æ•°ç»„ä¸­çš„ä½ç½®ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸æ¶ˆè€—èµ„æºçš„æ“ä½œï¼Œå› æ­¤æ­£ç¡®çš„åšæ³•æ˜¯åº”è¯¥new HashMap(2048)æ¯”è¾ƒåˆé€‚ã€‚æˆ‘ä»¬è¯´é“HashMapæ˜¯ä¸å®‰å…¨çš„ï¼Œå®ƒçš„ä¸å®‰å…¨ä¹Ÿä¸»è¦ä½“ç°åœ¨æ‰©å®¹çš„æ—¶å€™ã€‚ HashMapçš„å®‰å…¨é—®é¢˜åœ¨å¤šçº¿ç¨‹æ“ä½œæ—¶ï¼Œæ‰©å®¹çš„æ—¶å€™å¦‚æœå¤šçº¿ç¨‹éƒ½è¿›è¡ŒreHashæ“ä½œï¼Œé‚£ä¹ˆæœ‰å¯èƒ½é€ æˆé“¾è¡¨ä¸­çš„å…ƒç´ ç›¸äº’å¼•ç”¨ï¼Œå³Açš„ä¸‹ä¸€ä¸ªæŒ‡å‘Bï¼ŒBçš„ä¸‹ä¸€ä¸ªæŒ‡å‘Aï¼Œé€ æˆäº†æ­»å¾ªç¯ï¼Œä»è€Œå¯¼è‡´çº¿ç¨‹ä¸å®‰å…¨ã€‚å¦‚ä½•è®©HashMapå˜æˆå®‰å…¨çš„ï¼Ÿæœ‰ä¸‰ç§æ–¹æ³•ã€‚ æ›¿æ¢æˆHashtableï¼ŒHashtableé€šè¿‡å¯¹æ•´ä¸ªè¡¨ä¸Šé”å®ç°çº¿ç¨‹å®‰å…¨ï¼Œå› æ­¤æ•ˆç‡æ¯”è¾ƒä½ ä½¿ç”¨Collectionsç±»çš„synchronizedMapæ–¹æ³•åŒ…è£…ä¸€ä¸‹ã€‚æ–¹æ³•å¦‚ä¸‹ï¼š 1public static &lt;K,V&gt; Map&lt;K,V&gt; synchronizedMap(Map&lt;K,V&gt; m) ä½¿ç”¨ConcurrentHashMapï¼Œå®ƒä½¿ç”¨åˆ†æ®µé”æ¥ä¿è¯çº¿ç¨‹å®‰å…¨ é€šè¿‡å‰ä¸¤ç§æ–¹å¼è·å¾—çš„çº¿ç¨‹å®‰å…¨çš„HashMapåœ¨è¯»å†™æ•°æ®çš„æ—¶å€™ä¼šå¯¹æ•´ä¸ªå®¹å™¨ä¸Šé”ï¼Œè€ŒConcurrentHashMapå¹¶ä¸éœ€è¦å¯¹æ•´ä¸ªå®¹å™¨ä¸Šé”ï¼Œå®ƒåªéœ€è¦é”ä½è¦ä¿®æ”¹çš„éƒ¨åˆ†å°±è¡Œäº†ã€‚ CHMå¼•å…¥äº†åˆ†å‰²ï¼Œå¹¶æä¾›äº†HashTableæ”¯æŒçš„æ‰€æœ‰çš„åŠŸèƒ½ã€‚åœ¨CHMä¸­ï¼Œæ”¯æŒå¤šçº¿ç¨‹å¯¹Mapåšè¯»æ“ä½œï¼Œå¹¶ä¸”ä¸éœ€è¦ä»»ä½•çš„blockingã€‚è¿™å¾—ç›ŠäºCHMå°†Mapåˆ†å‰²æˆäº†ä¸åŒçš„éƒ¨åˆ†ï¼Œåœ¨æ‰§è¡Œæ›´æ–°æ“ä½œæ—¶åªé”ä½ä¸€éƒ¨åˆ†ã€‚æ ¹æ®é»˜è®¤çš„å¹¶å‘çº§åˆ«(concurrency level)ï¼ŒMapè¢«åˆ†å‰²æˆ16ä¸ªéƒ¨åˆ†ï¼Œå¹¶ä¸”ç”±ä¸åŒçš„é”æ§åˆ¶ã€‚è¿™æ„å‘³ç€ï¼ŒåŒæ—¶æœ€å¤šå¯ä»¥æœ‰16ä¸ªå†™çº¿ç¨‹æ“ä½œMapã€‚è¯•æƒ³ä¸€ä¸‹ï¼Œç”±åªèƒ½ä¸€ä¸ªçº¿ç¨‹è¿›å…¥å˜æˆåŒæ—¶å¯ç”±16ä¸ªå†™çº¿ç¨‹åŒæ—¶è¿›å…¥(è¯»çº¿ç¨‹å‡ ä¹ä¸å—é™åˆ¶)ï¼Œæ€§èƒ½çš„æå‡æ˜¯æ˜¾è€Œæ˜“è§çš„ã€‚ä½†ç”±äºä¸€äº›æ›´æ–°æ“ä½œï¼Œå¦‚put(),remove(),putAll(),clear()åªé”ä½æ“ä½œçš„éƒ¨åˆ†ï¼Œæ‰€ä»¥åœ¨æ£€ç´¢æ“ä½œä¸èƒ½ä¿è¯è¿”å›çš„æ˜¯æœ€æ–°çš„ç»“æœã€‚ å¦ä¸€ä¸ªé‡è¦ç‚¹æ˜¯åœ¨è¿­ä»£éå†CHMæ—¶ï¼ŒkeySetè¿”å›çš„iteratoræ˜¯å¼±ä¸€è‡´å’Œfail-safeçš„ï¼Œå¯èƒ½ä¸ä¼šè¿”å›æŸäº›æœ€è¿‘çš„æ”¹å˜ï¼Œå¹¶ä¸”åœ¨éå†è¿‡ç¨‹ä¸­ï¼Œå¦‚æœå·²ç»éå†çš„æ•°ç»„ä¸Šçš„å†…å®¹å˜åŒ–äº†ï¼Œä¸ä¼šæŠ›å‡ºConcurrentModificationExceptoinçš„å¼‚å¸¸ã€‚ CHMé»˜è®¤çš„å¹¶å‘çº§åˆ«æ˜¯16ï¼Œä½†å¯ä»¥åœ¨åˆ›å»ºCHMæ—¶é€šè¿‡æ„é€ å‡½æ•°æ”¹å˜ã€‚æ¯«æ— ç–‘é—®ï¼Œå¹¶å‘çº§åˆ«ä»£è¡¨ç€å¹¶å‘æ‰§è¡Œæ›´æ–°æ“ä½œçš„æ•°ç›®ï¼Œæ‰€ä»¥å¦‚æœåªæœ‰å¾ˆå°‘çš„çº¿ç¨‹ä¼šæ›´æ–°Mapï¼Œé‚£ä¹ˆå»ºè®®è®¾ç½®ä¸€ä¸ªä½çš„å¹¶å‘çº§åˆ«ã€‚å¦å¤–ï¼ŒCHMè¿˜ä½¿ç”¨äº†ReentrantLockæ¥å¯¹segmentsåŠ é”ã€‚ ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ConcurrentHashMapCHMé€‚ç”¨äºè¯»è€…æ•°é‡è¶…è¿‡å†™è€…æ—¶ï¼Œå½“å†™è€…æ•°é‡å¤§äºç­‰äºè¯»è€…æ—¶ï¼ŒCHMçš„æ€§èƒ½æ˜¯ä½äºHashtableå’Œsynchronized Mapçš„ã€‚è¿™æ˜¯å› ä¸ºå½“é”ä½äº†æ•´ä¸ªMapæ—¶ï¼Œè¯»æ“ä½œè¦ç­‰å¾…å¯¹åŒä¸€éƒ¨åˆ†æ‰§è¡Œå†™æ“ä½œçš„çº¿ç¨‹ç»“æŸã€‚CHMé€‚ç”¨äºåšcache,åœ¨ç¨‹åºå¯åŠ¨æ—¶åˆå§‹åŒ–ï¼Œä¹‹åå¯ä»¥è¢«å¤šä¸ªè¯·æ±‚çº¿ç¨‹è®¿é—®ã€‚æ­£å¦‚Javadocè¯´æ˜çš„é‚£æ ·ï¼ŒCHMæ˜¯HashTableä¸€ä¸ªå¾ˆå¥½çš„æ›¿ä»£ï¼Œä½†è¦è®°ä½ï¼ŒCHMçš„æ¯”HashTableçš„åŒæ­¥æ€§ç¨å¼±ã€‚ CHMå…è®¸å¹¶å‘çš„è¯»å’Œçº¿ç¨‹å®‰å…¨çš„æ›´æ–°æ“ä½œ åœ¨æ‰§è¡Œå†™æ“ä½œæ—¶ï¼ŒCHMåªé”ä½éƒ¨åˆ†çš„Map å¹¶å‘çš„æ›´æ–°æ˜¯é€šè¿‡å†…éƒ¨æ ¹æ®å¹¶å‘çº§åˆ«å°†Mapåˆ†å‰²æˆå°éƒ¨åˆ†å®ç°çš„ é«˜çš„å¹¶å‘çº§åˆ«ä¼šé€ æˆæ—¶é—´å’Œç©ºé—´çš„æµªè´¹ï¼Œä½çš„å¹¶å‘çº§åˆ«åœ¨å†™çº¿ç¨‹å¤šæ—¶ä¼šå¼•èµ·çº¿ç¨‹é—´çš„ç«äº‰ CHMçš„æ‰€æœ‰æ“ä½œéƒ½æ˜¯çº¿ç¨‹å®‰å…¨ CHMè¿”å›çš„è¿­ä»£å™¨æ˜¯å¼±ä¸€è‡´æ€§ï¼Œfail-safeå¹¶ä¸”ä¸ä¼šæŠ›å‡ºConcurrentModificationExceptionå¼‚å¸¸ CHMä¸å…è®¸nullçš„é”®å€¼ å¯ä»¥ä½¿ç”¨CHMä»£æ›¿HashTableï¼Œä½†è¦è®°ä½CHMä¸ä¼šé”ä½æ•´ä¸ªMap å‚è€ƒï¼šhttp://www.importnew.com/21388.html http://www.importnew.com/21388.html]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>HashMap</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Java Webâ€”â€”Servletå¼€å‘å…¥é—¨]]></title>
    <url>%2F2017%2F08%2Fjava-web-servlet-development-portal.html</url>
    <content type="text"><![CDATA[Servletæ˜¯ä»€ä¹ˆï¼ŸServletï¼ŒServer Applet,æ˜¯ä¸€ä¸ªJavaç¼–å†™çš„å°ç¨‹åºï¼Œå¯ä»¥åœ¨WebæœåŠ¡å™¨ä¸Šè¿è¡Œï¼ˆå¦‚Tomcatï¼‰ï¼Œå®ƒé€šè¿‡HTTPåè®®æ¥å—å’Œå“åº”å®¢æˆ·ç«¯è¯·æ±‚ã€‚å®¢æˆ·ç«¯å‘é€è¯·æ±‚ç»™WebæœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å°†è¯·æ±‚ä¿¡æ¯å‘é€ç»™Servletï¼ŒServletç”Ÿæˆå“åº”ï¼Œä¼ é€’ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å†å“åº”è‡³å®¢æˆ·ç«¯ã€‚Servletåœ¨Javaä¸­æ˜¯ä¸€ä¸ªæ¥å£ï¼Œç”¨äºå®šä¹‰è§„åˆ™å’Œæ‹“å±•åŠŸèƒ½ã€‚ Servletç”Ÿå‘½å‘¨æœŸ åˆå§‹åŒ–initå®¢æˆ·ç«¯å‘é€è¯·æ±‚è®¿é—®servletç¨‹åºï¼ŒTomcatä¼šåœ¨å†…å­˜ä¸­æŸ¥æ‰¾æ˜¯å¦å­˜åœ¨è¯¥servletçš„å¯¹è±¡ï¼Œå¦‚ä¸å­˜åœ¨ï¼Œåˆ™è°ƒç”¨initæ–¹æ³•åˆ›å»ºservletå¯¹è±¡ï¼Œå¦‚å·²ç»å­˜åœ¨ï¼Œåˆ™ç›´æ¥ä½¿ç”¨ã€‚ è¿è¡ŒserviceTomcatä¸ºè¯·æ±‚åˆ›å»ºServletRequestå¯¹è±¡å’ŒServletResponseå¯¹è±¡ï¼Œæ¯æ‰§è¡Œä¸€æ¬¡serviceæ–¹æ³•éƒ½ä»ServletRequestä¸­è·å–è¯·æ±‚å‚æ•°ï¼Œé€šè¿‡ServletResponseå‘é€å“åº”ç»™å®¢æˆ·ç«¯ã€‚ é”€æ¯destoryå½“æœåŠ¡å™¨å…³é—­æˆ–è€…Webé¡¹ç›®ç§»é™¤æ—¶ï¼Œservletä¼šå…³é—­ï¼ŒTomatè°ƒç”¨servletçš„destoryæ–¹æ³•è¿›è¡Œé”€æ¯ï¼Œé‡Šæ”¾èµ„æºã€‚ HttpServletServletæ˜¯ä¸€ä¸ªæ— åè®®çš„æ¥å£ï¼Œå®šä¹‰äº†æœåŠ¡å™¨å’Œjavaç¨‹åºä¹‹é—´è§„åˆ™ã€‚HttpServletæ˜¯å®ƒçš„ä¸€ä¸ªå­ç±»ï¼Œå…·æœ‰Httpåè®®ï¼Œå®ƒçš„serviceæ–¹æ³•ä¼šå¯¹è¯·æ±‚åˆ¤æ–­æ˜¯æ‰§è¡ŒdoGetæ–¹æ³•è¿˜æ˜¯doPostæ–¹æ³•ï¼Œå› æ­¤ä¹¦å†™Servletç¨‹åºéœ€è¦ç»§æ‰¿HttpServletç±»ï¼Œå¹¶å¤å†™doGetæ–¹æ³•å’ŒdoPostæ–¹æ³•ã€‚ 1234567891011121314151617package $&#123;enclosing_package&#125;;import java.io.IOException;import javax.servlet.ServletException;import javax.servlet.http.HttpServlet;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;public class $&#123;primary\_type\_name&#125; extends HttpServlet &#123; protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123; &#125; protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123; &#125;&#125; web.xmlé…ç½®Servleté€šè¿‡web.xmlé…ç½®ï¼Œè®©urlè·¯å¾„è®¿é—®å¯¹åº”çš„servletç¨‹åº 123456789101112131415&lt;servlet&gt; &lt;servlet-name&gt;servletåç§°&lt;/servlet-name&gt; &lt;servlet-class&gt;servletç¨‹åºçš„ç»å¯¹è·¯å¾„&lt;/servlet-class&gt;&lt;/servlet&gt;&lt;servlet-mapping&gt; &lt;servlet-name&gt;servletåç§°ï¼Œä¸ä¸Šé¢ä¿æŒä¸€è‡´å»ºç«‹æ˜ å°„&lt;/servlet-name&gt; &lt;url-pattern&gt;è®¿é—®è·¯å¾„ï¼Œæ ¼å¼ä¸º"/å…·ä½“å†…å®¹"ï¼Œè¡¨ç¤ºçš„URLä¸ºlocalhost:8080/webé¡¹ç›®å/å…·ä½“å†…å®¹&lt;/url-pattern&gt;&lt;/servlet-mapping&gt; ç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„ å®¢æˆ·ç«¯çš„è·¯å¾„ï¼Œæ¯”å¦‚åˆ©ç”¨é¡µé¢è®¿é—®ï¼Œä¸€èˆ¬ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼Œåé¢åŠ ä¸Šé¡¹ç›®åç§°/:æŒ‡çš„çš„æ˜¯ç»å¯¹è·¯å¾„ï¼Œè¡¨ç¤ºhttpï¼š//ip:portä¸å¸¦/è¡¨ç¤ºç›¸å¯¹è·¯å¾„ï¼Œè¡¨ç¤ºå½“å‰æ–‡ä»¶æ‰€åœ¨çš„çˆ¶ç›®å½•çš„è·¯å¾„ æœåŠ¡ç«¯è·¯å¾„ï¼Œæ¯”å¦‚web.xml/,ç»å¯¹è·¯å¾„ï¼Œä»£è¡¨httpï¼š/ip:port/é¡¹ç›®åç§° ServletConfigåœ¨å¼€å‘ä¸­ï¼Œservletåˆ›å»ºæœ‰æ—¶éœ€è¦ç»™å®šä¸€äº›åˆå§‹åŒ–å‚æ•°ï¼ŒwebæœåŠ¡å™¨ä¼šæŠŠè¿™äº›åˆå§‹åŒ–ä¿¡æ¯å°è£…åˆ°ServletConfigä¸­ï¼Œåˆ›å»ºservletæ—¶è°ƒç”¨çš„initæ–¹æ³•æ—¶ï¼Œä¼šå°†åˆå§‹åŒ–ä¿¡æ¯ä¼ é€’ç»™servletï¼Œå› æ­¤å¯ä»¥çœ‹ä½œwebç¨‹åºçš„å±€éƒ¨é…ç½®ã€‚ åˆå§‹åŒ–ä¿¡æ¯åœ¨web.xmlä¸­çš„servletæ ‡ç­¾ä¸­ï¼Œä»¥keyå’Œvalueçš„å½¢å¼è®¾ç½®ã€‚è·å–åˆå§‹åŒ–ä¿¡æ¯é€šè¿‡API getInitParameter(String name) æ ¹æ®keyè·å–valueå’Œ getInitParameterNames() è¿”å›æ‰€æœ‰keyçš„æšä¸¾ ServletContextæ¯ä¸€ä¸ªwebé¡¹ç›®éƒ½æ˜¯è¿è¡Œåœ¨javaè™šæ‹Ÿæœºä¸­çš„ä¸€ä¸ªwebç¨‹åºï¼Œå®ƒæ‹¥æœ‰ä¸€ä¸ªä¸ä¹‹å¯¹åº”çš„ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œå³ServletContextï¼Œå®ƒå¯ä»¥æä¾›webç¨‹åºä¸­æ‰€æœ‰servletå…±äº«çš„ä¿¡æ¯ï¼Œå³webç¨‹åºçš„å…¨å±€é…ç½®ã€‚ ServletContextçš„è®¾ç½®æ˜¯åœ¨web.xmlçš„æ ¹ç›®å½•ä¸­,æƒ³è¦è·å–é…ç½®ä¿¡æ¯éœ€è¦å…ˆè·å–ServletContextå¯¹è±¡ã€‚è·å–ServeltContextå¯ä»¥é€šè¿‡ServletConfigä¸­çš„getServetContext()è·å–ï¼Œæˆ–è€…é€šè¿‡ç»§æ‰¿çš„GenericServletä¸­çš„getServletContext()æ–¹æ³•ç›´æ¥è·å–.ç„¶åé€šè¿‡ServetContextä¸­çš„getInitParameterNames()æˆ–getInitParameterNames()è·å–å…¨å±€é…ç½®ä¿¡æ¯. ServletContextå¯ä»¥çœ‹ä½œwebç¨‹åºçš„ä¸€ä¸ªå…¬å…±å®¹å™¨ï¼Œä¸€ä¸ªwebç¨‹åºæ‰€æœ‰servletéƒ½å¯ä»¥è·å–å…¶ä¸­çš„æ•°æ®ã€‚ å¢åŠ ï¼šsetAttribute(String name,Object object) åˆ é™¤ï¼šremoveAttribute(String name è·å–ï¼šgetAttribute(String name) ServeltContextè¯»å–æ–‡ä»¶è·¯å¾„ getRealPath(String path) è¿”å›çš„æ˜¯ç»å¯¹è·¯å¾„ï¼Œå·¥ç¨‹å‘å¸ƒåï¼Œåœ¨ç”µè„‘ä¸­çš„çš„å®é™…è·¯å¾„ getContextPath() è·å–é¡¹ç›®çš„ç›¸å¯¹è·¯å¾„]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>servet</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JAVAå•ä¾‹æ¨¡å¼çš„ä¸ƒç§å†™æ³•]]></title>
    <url>%2F2017%2F06%2Fjava-singleton.html</url>
    <content type="text"><![CDATA[JAVAå•ä¾‹æ¨¡å¼çš„ä¸ƒç§å†™æ³• ç¬¬ä¸€ç§ï¼ˆæ‡’æ±‰ï¼Œçº¿ç¨‹ä¸å®‰å…¨ï¼‰ï¼š 123456789101112public class Singleton &#123; private static Singleton instance; private Singleton ()&#123;&#125; public static Singleton getInstance() &#123; if (instance == null) &#123; instance = new Singleton(); &#125; return instance; &#125; &#125; æ‡’åŠ è½½ï¼Œä½†æ˜¯å¤šçº¿ç¨‹å•ä¾‹ä¼šå¤±è´¥ã€‚ ç¬¬äºŒç§ï¼ˆæ‡’æ±‰ï¼Œçº¿ç¨‹å®‰å…¨ï¼‰ï¼š 12345678910public class Singleton &#123; private static Singleton instance; private Singleton ()&#123;&#125; public static synchronized Singleton getInstance() &#123; if (instance == null) &#123; instance = new Singleton(); &#125; return instance; &#125; &#125; çº¿ç¨‹å®‰å…¨ï¼Œæ•ˆç‡ä½ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ä¸éœ€è¦åŒæ­¥ã€‚ ç¬¬ä¸‰ç§ï¼ˆé¥¿æ±‰ï¼‰ï¼š 1234567public class Singleton &#123; private static Singleton instance = new Singleton(); private Singleton ()&#123;&#125; public static Singleton getInstance() &#123; return instance; &#125; &#125; é¿å…äº†çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œä½†æ˜¯instanceåœ¨ç±»åŠ è½½çš„æ—¶å€™å°±å®ä¾‹åŒ–äº†ï¼Œä¸èƒ½è¾¾åˆ°æ‡’åŠ è½½çš„æ•ˆæœã€‚ ç¬¬å››ç§ï¼ˆé¥¿æ±‰ï¼Œå˜ç§ï¼‰ï¼š 12345678910public class Singleton &#123; private Singleton instance = null; static &#123; instance = new Singleton(); &#125; private Singleton ()&#123;&#125; public static Singleton getInstance() &#123; return this.instance; &#125; &#125; å’Œç¬¬ä¸‰ç§å®é™…ä¸Šå·®ä¸å¤šã€‚ç±»åˆå§‹åŒ–çš„æ—¶å€™å®ä¾‹äº†instance ç¬¬äº”ç§ï¼ˆé™æ€å†…éƒ¨ç±»ï¼‰ï¼š 123456789public class Singleton &#123; private static class SingletonHolder &#123; private static final Singleton INSTANCE = new Singleton(); &#125; private Singleton ()&#123;&#125; public static final Singleton getInstance() &#123; return SingletonHolder.INSTANCE; &#125; &#125; è¿™ç§æ–¹å¼åŒæ ·åˆ©ç”¨äº†classloderçš„æœºåˆ¶æ¥ä¿è¯åˆå§‹åŒ–instanceæ—¶åªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œå®ƒè·Ÿç¬¬ä¸‰ç§å’Œç¬¬å››ç§æ–¹å¼ä¸åŒçš„æ˜¯ï¼šç¬¬ä¸‰ç§å’Œç¬¬å››ç§æ–¹å¼æ˜¯åªè¦Singletonç±»è¢«è£…è½½äº†ï¼Œé‚£ä¹ˆinstanceå°±ä¼šè¢«å®ä¾‹åŒ–ï¼ˆæ²¡æœ‰è¾¾åˆ°lazy loadingæ•ˆæœï¼‰ï¼Œè€Œè¿™ç§æ–¹å¼æ˜¯Singletonç±»è¢«è£…è½½äº†ï¼Œinstanceä¸ä¸€å®šè¢«åˆå§‹åŒ–ã€‚å› ä¸ºSingletonHolderç±»æ²¡æœ‰è¢«ä¸»åŠ¨ä½¿ç”¨ï¼Œåªæœ‰æ˜¾ç¤ºé€šè¿‡è°ƒç”¨getInstanceæ–¹æ³•æ—¶ï¼Œæ‰ä¼šæ˜¾ç¤ºè£…è½½SingletonHolderç±»ï¼Œä»è€Œå®ä¾‹åŒ–instanceã€‚ é™æ€å†…éƒ¨ç±»å’Œéé™æ€å†…éƒ¨ç±»ä¸€æ ·ï¼Œéƒ½æ˜¯åœ¨è¢«è°ƒç”¨æ—¶æ‰ä¼šè¢«åŠ è½½ã€‚å½“åªè°ƒç”¨å¤–éƒ¨ç±»çš„é™æ€å˜é‡ï¼Œé™æ€æ–¹æ³•æ—¶ï¼Œæ˜¯ä¸ä¼šè®©é™æ€å†…éƒ¨ç±»çš„è¢«åŠ è½½ã€‚ ä¸è¿‡åœ¨åŠ è½½é™æ€å†…éƒ¨ç±»çš„è¿‡ç¨‹ä¸­ä¹Ÿä¼šåŠ è½½å¤–éƒ¨ç±»ã€‚ ç¬¬å…­ç§ï¼ˆæšä¸¾ï¼‰ï¼š 12345public enum Singleton &#123; INSTANCE; public void whateverMethod() &#123; &#125; &#125; å®ƒä¸ä»…èƒ½é¿å…å¤šçº¿ç¨‹åŒæ­¥é—®é¢˜ï¼Œè€Œä¸”è¿˜èƒ½é˜²æ­¢ååºåˆ—åŒ–é‡æ–°åˆ›å»ºæ–°çš„å¯¹è±¡ï¼Œjdk1.5ä»¥ä¸Šæ”¯æŒ ç¬¬ä¸ƒç§ï¼ˆåŒé‡æ ¡éªŒé”ï¼‰ï¼š 1234567891011121314public class Singleton &#123; private volatile static Singleton singleton; private Singleton ()&#123;&#125; public static Singleton getSingleton() &#123; if (singleton == null) &#123; synchronized (Singleton.class) &#123; if (singleton == null) &#123; singleton = new Singleton(); &#125; &#125; &#125; return singleton; &#125; &#125; åªé”å®šsingleton==nullçš„æƒ…å†µï¼Œä¸€æ—¦å®ä¾‹åŒ–åå°±ä¸å†åŒæ­¥ã€‚ä½†æ˜¯åœ¨singleton=new Singleton();è¿™ä¸€æ­¥jvmæ‰§è¡Œæ˜¯æ— åºçš„ï¼Œå¯èƒ½å…ˆè®¾ç½®äº†singletonä¸ºéç©ºï¼Œå†æ„é€ äº†Singletonï¼Œè‹¥æ­¤æ—¶å…¶å®ƒçº¿ç¨‹è¿›å…¥äº†åˆ¤æ–­ï¼Œsingletonï¼=nullï¼Œè¿”å›çš„singletonå¹¶ä¸æ˜¯Singletonçš„å®ä¾‹ã€‚ åœ¨è¿™é‡Œç”¨åˆ°äº†volatileå…³é”®å­—ï¼Œä¸€æ—¦ä¸€ä¸ªå…±äº«å˜é‡ï¼ˆç±»çš„æˆå‘˜å˜é‡ã€ç±»çš„é™æ€æˆå‘˜å˜é‡ï¼‰è¢«volatileä¿®é¥°ä¹‹åï¼Œé‚£ä¹ˆå°±å…·å¤‡äº†ä¸¤å±‚è¯­ä¹‰ï¼š ä¿è¯äº†ä¸åŒçº¿ç¨‹å¯¹è¿™ä¸ªå˜é‡è¿›è¡Œæ“ä½œæ—¶çš„å¯è§æ€§ï¼Œå³ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†æŸä¸ªå˜é‡çš„å€¼ï¼Œè¿™æ–°å€¼å¯¹å…¶ä»–çº¿ç¨‹æ¥è¯´æ˜¯ç«‹å³å¯è§çš„ã€‚ ç¦æ­¢è¿›è¡ŒæŒ‡ä»¤é‡æ’åº]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç›˜ç‚¹æˆ‘çš„2016ç”µå­äº§å“æ¶ˆè´¹]]></title>
    <url>%2F2016%2F12%2F2016.html</url>
    <content type="text"><![CDATA[2016å¹´12æœˆ31ï¼Œæ¯•ä¸šå·²ç»ä¸€å¹´åŠã€‚æˆ‘ç®—æ˜¯ä¸ªå–œæ¬¢æ£é¼“ç”µå­äº§å“çš„äººï¼Œå¤§å­¦çš„æ—¶å€™æ˜¯ä¸ªç©·å­¦ç”Ÿï¼Œå›Šè‚¿ç¾æ¶©ï¼Œå¾ˆå¤šå–œæ¬¢çš„ç”µå­äº§å“åªèƒ½ç½‘ä¸Šçœ‹çœ‹æ­¢æ¸´ï¼Œç° åœ¨å·¥ä½œä¸€å¹´å¤šï¼Œä¹Ÿç®—æ˜¯æœ‰äº†ä¸€ç‚¹ç‚¹ç»æµæ”¶å…¥ï¼Œå¯ä»¥å°è¯•ä¸€ä¸‹è‡ªå·±é’Ÿæƒ…å·²ä¹…çš„ä¸€äº›å°ç©æ„ï¼Œåœ¨2016å¹´çš„æœ€åä¸€å¹´ï¼Œç›˜ç‚¹ä¸€ä¸‹è¿™ä¸€å¹´å‰æ‰‹çš„ç”µå­äº§å“ã€‚ 2016å¹´å‰æ‰‹äº§å“1.NOKIA N1 è¯º åŸºäºšï¼ˆNokiaï¼‰N1å¹³æ¿, 7.9è‹±å¯¸ ç«å±±ç°,å¹´åˆ3æœˆè´­äºäº¬ä¸œã€‚æˆ‘ä»¬è¿™ä¸ªå¹´é¾„çš„å¹´è½»äººä»¬éƒ½æ˜¯ç»å†äº†è¯ºåŸºäºšçš„æ—¶ä»£è¿‡æ¥çš„ï¼Œå¤šå¤šå°‘å°‘å¯¹è¯ºåŸºäºšéƒ½æœ‰ä¸€ä»½æƒ…æ€€ï¼Œæˆ‘ä¹Ÿæ˜¯å¦‚æ­¤ã€‚å¯æƒœè¿™ä¸ªå¹³æ¿åªæ˜¯è´´äº†è¯ºåŸº äºšçš„ç‰Œè€Œå·²ï¼Œå®é™…ä¸Šç”±å¯Œå£«åº·ç”Ÿäº§ï¼Œä¸è¿‡å…¶ç´ è´¨è¿˜ç®—å¯åœˆå¯ç‚¹ã€‚2Kçš„åˆ†è¾¨ç‡ã€7.9è‹±å¯¸å…¨é‡‘å±æœºèº«ï¼Œè™½ç„¶ä¸æ”¯æŒæ‰©å±•å­˜å‚¨ï¼Œä½†æ˜¯æœºèº«å­˜å‚¨32Gä¹Ÿç®—å¤Ÿç”¨ï¼Œä¸»è¦ æ˜¯ä»·æ ¼è¶³å¤Ÿå¸å¼•äººã€‚ç®—èµ·æ¥å®ƒçš„çŸ­æ¿ä¹Ÿä¸å°‘ï¼Œé…ç½®æ¸£æ¸£ï¼Œç³»ç»Ÿä¸‡å¹´5.0ï¼Œ4ï¼š3çš„æ¯”ä¾‹çœ‹èµ·è§†é¢‘æ¥é»‘è¾¹å®åœ¨ç¢çœ¼ï¼Œå¥½åœ¨é¢œå€¼ä¸ä½ï¼Œè€Œä¸”æˆ‘çš„éœ€æ±‚ä¹Ÿåªæ˜¯ç”¨æ¥çœ‹æ¼«ç”» å’ŒPDF,è¿™ä¸¤ç‚¹å¯ä»¥è¯´æ˜¯ç›¸å½“ä»¤æˆ‘æ»¡æ„ã€‚2Kçš„åˆ†è¾¨ç‡ç›¸å½“ç»†è…»ï¼Œé…åˆPerfect Viewerçœ‹çœ‹æ¼«ç”»ï¼Œçœ‹çœ‹PDFæ–‡æ¡£ï¼Œå½“ç„¶è¿˜æœ‰å®‰å“ç¥å™¨EhViewerï¼Œç©æ¸¸æˆæ—¶å€™æŸ¥æŸ¥æ”»ç•¥ï¼Œä¸è¿‡ä»Šå¹´åŠ ç­ä¸€ç›´æ¯”è¾ƒå¤šï¼Œå¯¼è‡´N1åƒç°çš„æ—¶é—´ä¹Ÿä¸å°‘ã€‚ 2.AOC P2491VWHE AOC P2491VWHE/BWï¼Œ 23.6è‹±å¯¸1.6mm PLSæ˜¾ç¤ºå™¨ï¼Œ4æœˆè´­äºäº¬ä¸œã€‚è¿™ä¸ªæ˜¯ä»Šå¹´æˆ‘æ„Ÿè§‰ä¹°çš„éå¸¸å€¼çš„ä¸œè¥¿äº†ï¼Œç»ˆäºä¸ç”¨å†å¿å—ç¬”è®°æœ¬é‚£æ¸£æ¸£çš„åˆ†è¾¨ç‡å’Œå°æ˜¾ç¤ºå±äº†ï¼Œçœ‹ç”µå½±åˆ·ç½‘é¡µï¼Œçˆ½çš„é£èµ·ï¼ŒçœŸæ˜¯æ—©å°± è¯¥æ’¸ä¸€ä¸ªçˆ½çˆ½äº†ã€‚è€Œå…¶æœ¬èº«æ€§ä»·æ¯”å’Œè´¨é‡ã€æ˜¾ç¤ºæ•ˆæœåªèƒ½è¯´ä¸€èˆ¬èˆ¬ï¼Œæ²¡æœ‰å†…ç½®éŸ³ç®±ï¼Œä¹Ÿæ²¡æœ‰éŸ³é¢‘è¾“å‡ºæ¥å£ï¼Œä¸è¿‡å¯¹äºä¹ æƒ¯äº†ç¬”è®°æœ¬åæ”¹ç”¨è¿™ä¸ªæ‰€å¸¦æ¥çš„æ„Ÿå®˜ä½“éªŒè¿˜æ˜¯ å¾ˆæ£’çš„ï¼Œè‡ªä»å…¥äº†è¿™ä¸ªï¼Œä¸‹ç”µå½±åŸºæœ¬éƒ½æ˜¯1080Päº†ï¼Œè¿™æ ·æ‰å¤Ÿçˆ½ã€‚ 3.ATH-IM50 é“ ä¸‰è§’ ATH-IM50 åŒåŠ¨åœˆå…¥è€³è€³æœºï¼Œäº¬ä¸œ618æ´»åŠ¨å…¥ï¼Œç”¨äº†å‡100åˆ¸328å…¥æ‰‹ã€‚åœ¨æ­¤ä¹‹å‰æˆ‘ä¸€ç›´å¾ˆæ’æ–¥å…¥è€³å¼è€³æœºï¼Œæˆ‘è€³è…”æ¯”è¾ƒå°ï¼Œå…¥è€³å¼çš„è€³æœºæ„Ÿè§‰å¸¦ç€å¾ˆä¸èˆ’æœï¼Œä½†æ˜¯å…¥äº† è¿™ä¸ªä¹‹åæ”¹å˜äº†æˆ‘å¯¹å…¥è€³å¼è€³æœºçš„çœ‹æ³•ï¼Œå¸¦ç€çœŸæ˜¯å¾ˆèˆ’æœï¼Œè€³æŒ‚å¼çš„è®¾è®¡ä¹Ÿå¾ˆå¥½ï¼Œè™½ç„¶åªæ˜¯å…¥é—¨çº§çš„äº§å“ï¼ŒåŒåŠ¨åœˆçš„ä½“éªŒå·²ç»è®©æˆ‘è¿™ä¸ªæœ¨è€³å…šæ„Ÿè§‰éå¸¸æƒŠè‰³äº†ï¼Œå…¥äº† è¿™ä¸ªä¹‹åï¼Œæ‰‹é‡Œçš„é“ä¸‰è§’SQ505ã€T400ã€æ½œ39_ã€_ä»¿314Pçš„èœ‚é¸Ÿæˆ‘åŸºæœ¬éƒ½æ²¡å†å¬è¿‡ã€‚ç”±äºæœ¨è€³ï¼Œå°±ä¸å¯¹ç„å­¦æ–¹é¢å‘è¡¨è¿‡å¤šè¯„ä»·äº†ï¼Œåæ­£æ•ˆæœçœŸçš„å¾ˆæ£’ï¼Œç”šè‡³åæ‚”å½“åˆä¸ºå•¥æ²¡é€‰IM70ï¼Œå½“åˆæ„Ÿè§‰ç¨è´µè€Œä¸”çº¢è‰²å®åœ¨å¤ªéªšéš¾ä»¥é©¾é©­ï¼Œç°åœ¨è§‰å¾—è¦æ˜¯å…¥äº†IM70åªä¼šæ›´çˆ½å•Šï¼Œåªèƒ½æš—ç¤ºè‡ªå·±åæ­£æˆ‘æ˜¯æœ¨è€³ï¼Œæ²¡å•¥åŒºåˆ«å–½ï¼ 4.å»ºå…´T9 128G SSD å»º å…´(LITEON) ç¿é€Ÿç³»åˆ— T9 128G SATA3 å›ºæ€ç¡¬ç›˜ï¼Œä¸»æ§Marvell 88SS9187ï¼Œ eMLCé¢—ç²’ã€‚8æœˆè´­äºäº¬ä¸œï¼Œè‡ªå·±è£…äº†ç¬”è®°æœ¬ä¹‹ååˆå¸®åŒäº‹ä¹°äº†ä¸€å—æ¢ä¸Šã€‚å…¶å®æƒ³ä¸ŠSSDå¾ˆä¹…äº†ï¼Œä½†æ˜¯æ‡’ç™Œå‘ä½œä¸€ç›´æ‡’å¾—åŠ¨ï¼Œè€Œä¸”ç¬”è®°æœ¬æ€§èƒ½åˆå¤ªæ¸£ï¼Œæ„Ÿè§‰ä¸Šäº† æ•ˆæœä¹Ÿæ˜¯æ‰“æŠ˜æ‰£ï¼Œä½†æ˜¯è¶Šæ¥è¶Šå—ä¸äº†ç«ç‹é‚£é¾Ÿé€Ÿçš„å¯åŠ¨é€Ÿåº¦ï¼Œpotplayçœ‹äº†ç”µå½±è¿˜å¾—ç­‰äº†2Sï¼Œæ„Ÿè§‰éå¸¸ä¸çˆ½ï¼Œäºæ˜¯ä¸€æ€’æœæ–­ä¸Šäº†SSD,å»ºå…´è¿™ä¸ªç®—æ˜¯æœ€ä¾¿ å®œçš„ä¸€æ¬¾MLC SSDäº†ï¼Œæ€»ä½“æ¥è¯´è¿˜æ˜¯ä»¤äººæ»¡æ„çš„ï¼Œè™½ç„¶ç¬”è®°æœ¬è¿˜æ˜¯æ¸£æ¸£ï¼Œä½†æ˜¯å„ç§è½¯ä»¶å¯åŠ¨é€Ÿåº¦è¿˜æ˜¯å¤§å¤§å¾—åˆ°äº†æå‡ï¼Œæ— å¥ˆç¬”è®°æœ¬æ€§èƒ½æœ‰é™ï¼Œæ²¡æ³•å¼„å‡ ä¸ª3Aå¤§ä½œè¯»æ¡çˆ½ä¸€æŠŠ äº†ã€‚ 5.SONY PS4 SONY PlayStation 4 æ¸¯ç‰ˆ 500G 1206å‹ï¼Œ9æœˆåœ¨æ·˜å® S1ç‰ˆä¸»çš„åº—é‡Œä¹°çš„ï¼Œç´¢å°¼å¤§æ³•å¥½ï¼æ€»ç®—æ˜¯å……å€¼äº†ä¿¡ä»°ï¼Œåœ†äº†ä¸€ä¸ªæ¢¦ã€‚å¿ƒåŠ¨PS4å¾ˆä¹…äº†ï¼Œå´ä¸€ç›´æ²¡ä¸‹å®šå†³å¿ƒä¹°ã€‚æœ€åˆæ˜¯æœ‰æ„PSVçš„ï¼Œå¤§å­¦PSVç©çš„é—ªè½¨ï¼Œä¸ºäº† ç©åˆ°ä¸‹ä¸€éƒ¨è½¨è¿¹ï¼Œè€ƒè™‘è¿‡PSV,ä½†æ˜¯æš´æ­»Vå®åœ¨æ˜¯æ²¡å¤ªå¤šæ¸¸æˆå¯ç©ï¼Œè€Œä¸”æ„Ÿè§‰Falcomä¹Ÿè¯¥ä¸ŠPS4ï¼Œä½†æ˜¯è½¨è¿¹çš„æ¶ˆæ¯ä¸€ç›´è¿Ÿè¿Ÿæœªå‡ºï¼Œä¸œäº¬è¿·åŸå’Œä¼Šè‹8ç›¸ç»§ å‘å”®ï¼Œè€Œä¸”éƒ½ä¼šç™»å½•PS4ï¼Œæ‰€ä»¥ä¸€ç›´åœ¨è§‚æœ›çŠ¶æ€ã€‚ä¸€ç›´åˆ°9æœˆï¼Œæ„Ÿè§‰é‚£æ®µæ—¶é—´å¿ƒåŠ›æ†”æ‚´ï¼Œæƒ³æ‰¾ä¸ªå‘æ³„å£ï¼Œå¤§åŠå¹´éƒ½æ²¡å†çœ‹åŠ¨ç”»äº†ï¼Œæ‰¾äº†å‡ éƒ¨ä¹Ÿæä¸èµ·å…´è¶£ï¼Œäºæ˜¯å†³ å®šå…¥å°PS4å……å€¼ä¿¡ä»°ï¼Œå½“æ—¶Slimå·²ç»æ³„æ¼,Proï¼Œä¸å¯¹é‚£ä¸ªæ—¶å€™ä»£å·è¿˜æ˜¯NEOçš„å„ç§è°£è¨€æ»¡å¤©é£ï¼Œslimçš„å¤–è§‚æ„Ÿè§‰æ²¡æœ‰è€ç‰ˆæ¼‚äº®ï¼Œäºæ˜¯ç›´æ¥å…¥äº†æ¸¯ç‰ˆ PS4ï¼Œç¬¬ä¸€ä¸ªå…¥æ‰‹çš„æ¸¸æˆæ˜¯ç¥ç§˜æµ·åŸŸ4ï¼Œä¹Ÿæ˜¯æ·˜å®ä¹°çš„å®ä½“ç‰ˆï¼Œå½“æ—¶çœŸçš„æ˜¯è¢«ç”»é¢å’Œæ¼”å‡ºç»™éœ‡æƒŠåˆ°äº†ï¼Œæ¸¸æˆå…¨ç¨‹çœŸçš„éå¸¸äº«å—ï¼Œå¦‚åŒæ¬£èµä¸€éƒ¨æ³¢æ¾œèµ·ä¼çš„æ•…äº‹ï¼Œè€Œ è¿™ä¸ªæ•…äº‹æ˜¯ç”±æˆ‘è‡ªå·±äº²è‡ªæ“æ§çš„ï¼ŒçœŸæ˜¯å¸¦æ¥äº†ä¸ä¸€æ ·ä½“éªŒï¼Œæˆ‘æ˜¯ä¸€ä¸ªåŠ¨ä½œæ¸¸æˆè‹¦æ‰‹ï¼Œä¹Ÿå°±åªèƒ½ç©ç©é¬¼æ³£å’Œæš—é»‘è¡€ç»Ÿè¿™äº›åŠ¨ä½œæ¸¸æˆï¼Œå¤§å¤šæ•°éƒ½æ˜¯åœ¨ç©RPGå’Œä¸€äº› ARPGï¼Œç¥æµ·4è®©æˆ‘æˆä¸ºäº†é¡½çš®ç‹—ç²‰ï¼Œäºæ˜¯åæ¥é™†é™†ç»­ç»­è¡¥äº†é¡½çš®è´­çš„ç¾å›½æœ«æ—¥ã€ç¥æµ·1ã€2ã€3,å¹¶ä¸”æ¥ä¸‹æ¥æœŸå¾…ç€ç¥æµ·4DLCå’Œç¾æœ«2ã€‚ä¸è¿‡PSNæ¸¸æˆä»· æ ¼å’ŒSteamæ¯”èµ·æ¥çœŸæ˜¯è´µäº†å¥½å¤šï¼Œè™½ç„¶å®ä½“ç‰ˆå¯ä»¥äºŒæ‰‹å›è¡€ï¼Œä½†æ˜¯å¾€å¾€æ•°å­—ç‰ˆæœ‰æ‰“æŠ˜æ´»åŠ¨ï¼Œè€Œä¸”æ”¶è—ç™–å‘ä½œå®åœ¨ä¸å¿å¿ƒå–äºŒæ‰‹ï¼Œæ‰€ä»¥ä¹°æ¸¸æˆåªèƒ½èµ¶ä¸Šæ‰“æŠ˜æˆ–è€…é å¸¸å¿ƒåŠ¨æ‰èˆå¾—å…¥æ‰‹ã€‚å‰é¢ä¹Ÿè¯´äº†ç¬”è®°æœ¬å¤ªæ¸£ï¼Œå¤§å­¦æ¯•ä¸šä¹‹ååŸºæœ¬å°±æ²¡ç©è¿‡å•¥å•æœºæ¸¸æˆäº†ï¼Œå…¥äº†PS4ä¹‹åæ€»ç®—é‡æ‹¾äº†èµ·æ¥ï¼Œä¸‹ç­ä¹‹åç©ä¼šæ¸¸æˆæ”¾æ¾ä¸€ä¸‹ï¼Œåˆ·åˆ·å¥–æ¯ä¹ æ­¤ä¸ç–²ï¼Œè¯·è®©æˆ‘é«˜å‘¼ä¸€å£°ï¼šç´¢å°¼å¤§æ³•å¥½å•Šï¼è€Œæ˜å¹´é—ªè½¨ä¸‰ä¹Ÿè¦å‘å”®ï¼ŒPS4ç‹¬å ï¼Œåªèƒ½å¯¹Vå…¬ä¸»è¯´ä¸€å£°å¯æƒœäº† 6.The Witcher 3 Game of the Year Edition (PS4) å·« å¸ˆä¸‰â€”ç‹‚çŒå¹´åº¦ç‰ˆã€‚ä¹‹æ‰€ä»¥æŠŠè¿™ä¸ªå•ç‹¬æ‹¿å‡ºæ¥è¯´ï¼Œæ˜¯å› ä¸ºè¿™ä¸ªæ¯”è¾ƒç‰¹æ®Šï¼Œæˆ‘çš„ç¬¬ä¸€æ¬¡æµ·æ·˜ï¼Œ11æœˆåº•è´­äºè‹±å›½äºšé©¬é€Šï¼Œç®—ä¸Šé‚®è´¹ä¸€å…±Â£19.87ï¼Œå‰å‰ååèŠ±äº†åŠ ä¸ªæœˆå¤šæ‰åˆ°æ‰‹ã€‚å¤§å­¦çš„æ—¶å€™å¿å—ç€20å¤šå¸§ç©äº†å·«å¸ˆäºŒï¼Œä¹…ä¹…éš¾ä»¥å¿˜æ€€ï¼Œåæ¥ç‹‚çŒå‘å”®ï¼Œå¥½è¯„å¦‚æ½®ï¼Œä½†æ˜¯æ²¡æœ‰è®¾å¤‡å¯ä»¥ä½“éªŒï¼Œå¿ƒç†ç—’ç—’ä¸å·²ï¼Œå…¥äº†PS4åç»ˆäºå¯ä»¥ å¼¥è¡¥ä¸€ä¸‹ã€‚æ­£å¥½é»‘äº”é‚£æ®µæ—¶é—´è‹±äºšå·«å¸ˆä¸‰ä¸€ç›´æ‰“æŠ˜ï¼Œè€Œä¸”è‡ªå¸¦ç¹ä½“ä¸­æ–‡ï¼Œä»·æ ¼ä¹Ÿå¤Ÿä¾¿å®œï¼Œæ¯”æ¸¯æœå½“æ—¶çš„æ´»åŠ¨6æŠ˜è¿˜è¦ä¾¿å®œå‡ åå—ï¼Œæ­£å¥½å‰æ®µæ—¶é—´ä¿¡ç”¨å¡ä¹Ÿç”³è¯·æˆåŠŸï¼Œ äºæ˜¯æœæ–­ä¸‹å•ã€‚ä¸å¾—ä¸è¯´æ—¶é—´çœŸçš„æŒºé•¿çš„ï¼Œä»è·å…°çš„é˜¿å§†æ–¯ç‰¹ä¸¹å‘è´§åˆ°æˆ‘è¿™å¤§éƒ‘å§†æ–¯ç‰¹ä¸¹ï¼ŒçœŸæ˜¯ç­‰äº†å¥½ä¹…ã€‚ä¸Šæ‰‹ä¹‹åæ„Ÿè§‰æ³¢å…°äººçœŸæ˜¯åšé“ï¼Œè¿™æ¸¸æˆç¡®å®å¯ä»¥ç§°å¾—ä¸Šæ˜¯ æ³¢å…°äººçš„éª„å‚²ï¼Œä¸å¤šè¯´äº†ï¼Œæ¥å±€æ˜†ç‰¹ç›˜å§ï¼ 7.å¸Œæ· 1Tç¬”è®°æœ¬ç¡¬ç›˜ å¸Œ æ·(SEAGATE)1T 5400è½¬128M SATA3 ç¬”è®°æœ¬ç¡¬ç›˜(ST1000LM035)ï¼Œè¿™ä¸ªæ²¡å•¥å¥½è¯´äº†ï¼Œç»™PS4æ¢çš„ã€‚ä¸€ç›´åœ¨è§‚æœ›æƒ³ä¹°ä¸ª1Tæˆ–è€…2Tçš„ç¡¬ç›˜ç»™PS4æ¢ä¸Šï¼Œç»“æœç¡¬ç›˜ä»·æ ¼æ¶¨çš„å¥½å‰å®³ï¼Œç¢°åˆ° åŒ12äº¬ä¸œæ€»ç®—èˆå¾—æ‰“æŠ˜ï¼Œäºæ˜¯å…¥äº†å—1Tçš„ã€‚ä¸å¾—ä¸è¯´ç°åœ¨è¿™PS4æ¸¸æˆçœŸæ˜¯è›®å¤§çš„ï¼Œå³ä½¿æ˜¯å®ä½“ç‰ˆä¹Ÿæ˜¯è¦æŠŠæ¸¸æˆæ‹·è´åˆ°æœºèº«é‡Œï¼Œå…‰ç›˜åªæ˜¯ä¸€ä¸ªéªŒè¯çš„ä½œç”¨ï¼Œç¥æµ· å›› 58Gã€GTA5 65G ã€å·«å¸ˆä¸‰ 48Gâ€¦â€¦æƒ³æƒ³å‡ å¹´å‰ç©çš„æ¸¸æˆï¼Œå˜åŒ–çœŸæ˜¯å¤§ã€‚ 2016å¹´æƒ³ä½“éªŒçš„äº§å“â€”â€”VRã€AR VR åœ¨16å¹´ç‚’å¾—çœŸæ˜¯éå¸¸ç«çˆ†ï¼Œä½ç«¯å…¥é—¨çš„å„ç§ç›’å­ã€çœ¼é•œï¼Œä¸­é«˜ç«¯çš„ç´¢å°¼PlayStation VRã€HTC Viveã€Oculus Riftï¼Œä¼¼ä¹ä»¥å‰ç§‘å¹»ç”µå½±ä¸­çš„æŠ€æœ¯ä¸€ä¸‹å­èµ°åˆ°äº†æˆ‘ä»¬ç”Ÿæ´»ä¸­ï¼Œè‡³äºVRçš„å‰æ™¯å’Œå„å¤§å‚å•†äº§å“çš„ä¼˜åŠ£åœ¨è¿™é‡Œä¸åœ¨å¤šè¯´ï¼Œæˆ‘ä¸ªäººè€Œè¨€è¿˜æ˜¯å¾ˆå¸Œæœ›è¿™ä¸ªæŠ€æœ¯èƒ½å¤Ÿè‰¯å¥½ çš„å‘å±•ä¸‹å»ï¼Œæœ€ç»ˆèƒ½ç‚¹å‡ºè„‘åæ’ç®¡çš„é»‘ç§‘æŠ€ã€‚è™½ç„¶æŠ€æœ¯çš„ä¸æˆç†Ÿã€æ¸¸æˆçš„å•è°ƒä¸ç¼ºä¹ï¼Œå³ä½¿æ˜¯è¯„ä»·æœ€å¥½çš„PS VRä¹Ÿæ¸æ¸ä¸åœ¨å¸å¼•äººä»¬çš„çœ¼çƒï¼Œæˆ‘è¿˜æ˜¯å¯¹VRå……æ»¡ç€ä¿¡å¿ƒï¼ŒåŒç†å¾®è½¯çš„AR HoloLensä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå¸Œæœ›17å¹´èƒ½æœ‰æœºä¼šäº²è‡ªä½“éªŒä¸€ä¸‹ã€‚ 2017å¹´æœŸå¾…äº§å“â€”â€”Nintendo Switch ä¸ å¾—ä¸è¯´ï¼Œä»»å¤©å ‚çš„ SwitchçœŸæ˜¯è®©äººæ„Ÿè§‰åˆ°æƒŠè‰³ï¼ŒæŒæœºä¾¿æºä½†æ˜¯æ€§èƒ½ã€æ˜¾ç¤ºæ•ˆæœæœ‰é™ï¼Œä¸»æœºä½“éªŒæ•ˆæœå¥½ä½†æ˜¯ä¾¿æºæ€§æ‰“äº†å¤§å¤§çš„æŠ˜æ‰£ï¼Œè€ŒSwitchè®©äºŒè€…åˆäºŒä¸ºä¸€çš„è®¾è®¡å¯ä»¥è¯´ æ˜¯ç©å®¶ä¸€ç›´ä»¥æ¥çš„ä¸€ä¸ªæ¢¦æƒ³ã€‚è™½ç„¶ç°åœ¨å·²ç»æ›å…‰äº†å¾ˆå¤šä¿¡æ¯ï¼Œè‡³äºåˆ°åº•å…¶å®é™…ä½“éªŒæ•ˆæœä¼šå¦‚ä½•ï¼Œè¿˜æ˜¯æœŸå¾…æ˜å¹´3æœˆçš„å‘å¸ƒä¼šï¼Œå¸Œæœ›ä»»å¤©å ‚èƒ½å¸¦æ¥æƒŠå–œï¼Œå†åˆ›ä¸€ä¸ªä¼  å¥‡ã€‚]]></content>
      <categories>
        <category>ç”µå­äº§å“</category>
      </categories>
      <tags>
        <tag>ç”µå­äº§å“</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Javaç±»åŠ è½½ä»¥åŠå¯¹è±¡åˆ›å»ºè¿‡ç¨‹]]></title>
    <url>%2F2016%2F12%2Fjava-classload.html</url>
    <content type="text"><![CDATA[å¯¹äºJavaç±»åŠ è½½ä»¥åŠå¯¹è±¡åˆ›å»ºçš„è¿‡ç¨‹ï¼Œé¦–å…ˆçœ‹ä¸€ä¸‹JVMè™šæ‹Ÿæœºè¿è¡Œæ—¶å†…å­˜ä¸­çš„æ•°æ®åˆ†å¸ƒ åˆ†å¸ƒ ç§æœ‰ï¼š æ ˆå†…å­˜Stackï¼šæ ˆç»“æœï¼Œå…ˆè¿›åå‡ºï¼Œæ–¹æ³•è¿›æ ˆæ‰§è¡Œï¼Œæ‰§è¡Œå®Œæ¯•å‡ºæ ˆï¼Œæ–¹æ³•ä¸­çš„å±€éƒ¨å˜é‡ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€é“¾æ¥ã€æ–¹æ³•è¿”å›å€¼éƒ½ä¿å­˜åœ¨æ­¤å¤„ã€‚ æœ¬åœ°æ–¹æ³•åŒºï¼šåŠ è½½æœ¬åœ°éjavaè¯­è¨€ä»£ç çš„å…¥å£ ç¨‹åºè®¡æ•°å™¨ï¼šç”±äºå¤šçº¿ç¨‹CPUåœ¨å„çº¿ç¨‹ä¹‹é—´æ¥å›åˆ‡æ¢ï¼Œå› æ­¤ç¨‹åºè®¡æ•°å™¨æ¥æ ‡è®°å½“å‰çº¿ç¨‹æ‰§è¡Œåˆ°çš„ä»£ç çš„ä½ç½® å…±äº«ï¼š å †å†…å­˜ï¼šå­˜æ”¾å¯¹è±¡å®ä¾‹ï¼Œå æ®å†…å­˜æœ€å¤§çš„ä¸€å—åŒºåŸŸï¼Œæœ‰ç‹¬ç‰¹çš„GCå›æ”¶æœºåˆ¶å›æ”¶æ²¡æœ‰å¼•ç”¨å…³è”çš„å¯¹è±¡ï¼Œå¯åˆ†ä¸ºå¹´è½»ä»£å’Œå¹´è€ä»£ æ–¹æ³•åŒºï¼šå­˜å‚¨åŠ è½½çš„ç±»ä¿¡æ¯ã€å¸¸é‡åŒºã€é™æ€å˜é‡ã€JITï¼ˆå³æ—¶ç¼–è¯‘å™¨ï¼‰å¤„ç†åçš„æ•°æ®ç­‰ ç±»åŠ è½½åŠå¯¹è±¡åˆ›å»ºè¿‡ç¨‹ï¼š å¯åŠ¨JVMï¼Œå¼€å§‹åˆ†é…å†…å­˜ç©ºé—´ å°†ç¼–è¯‘åçš„.classæ–‡ä»¶åŠ è½½åˆ°æ–¹æ³•åŒºï¼Œéé™æ€å†…å®¹åŠ è½½åˆ°éé™æ€çš„åŒºåŸŸï¼Œé™æ€å†…å®¹åŠ è½½åˆ°é™æ€åŒºï¼Œé™æ€æ–¹æ³•è°ƒç”¨çš„æ—¶å€™æ‰ä¼šåŠ è½½ ç»™é™æ€æˆå‘˜å˜é‡é»˜è®¤åˆå§‹åŒ–ï¼Œé»˜è®¤åˆå§‹åŒ–å®Œæˆä¹‹åå¼€å§‹æ˜¾ç¤ºåˆå§‹åŒ– æ‰§è¡Œé™æ€ä»£ç å—ï¼Œå…ˆæ‰§è¡Œçˆ¶ç±»çš„é™æ€ä»£ç å—å†æ‰§è¡Œå­ç±»çš„é™æ€ä»£ç å— æ‰§è¡Œmainæ–¹æ³•çš„æ—¶å€™ï¼Œæ ˆå†…å­˜å¼€è¾Ÿç©ºé—´ï¼Œå‹æ ˆâ€“è¿›æ ˆ mainæ–¹æ³•çš„æ ˆåŒºåˆ†é…äº†ä¸€ä¸ªå˜é‡P åœ¨å †å†…å­˜ä¸­å¼€è¾Ÿä¸€ä¸ªå¯¹è±¡ç©ºé—´ï¼Œé¦–å…ˆä¼šå»æ–¹æ³•åŒºæŸ¥æ‰¾ç±»æ˜¯å¦åŠ è½½ ç±»å·²ç»åŠ è½½ï¼Œå¼€å§‹å¯¹è±¡åˆ›å»ºï¼Œåœ¨å¯¹è±¡ç©ºé—´å¯¹éé™æ€æˆå‘˜å˜é‡é»˜è®¤åˆå§‹åŒ– åŠ è½½å¯¹åº”æ„é€ å‡½æ•°ï¼Œæ‰§è¡Œéšå¼ä¸‰æ­¥ éšå¼çš„super(); æ˜¾ç¤ºåˆå§‹åŒ–(ç»™æ‰€æœ‰çš„éé™æ€çš„æˆå‘˜å˜é‡) æ‰§è¡Œæ„é€ ä»£ç å— æ‰§è¡Œæ„é€ å‡½æ•°ä¸­çš„ä»£ç ]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>jvm</tag>
        <tag>ç±»åŠ è½½</tag>
      </tags>
  </entry>
</search>
